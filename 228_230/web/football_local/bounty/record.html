<!DOCTYPE html>
<html>
<head lang="en">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0">
    <meta content="telephone=no" name="format-detection">
    <meta name="msapplication-tap-highlight" content="no">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cleartype" content="on">
    <title>赏金记录</title>
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
<header class="sq_header" id="inHead">
    <div class="sq_headerUpBox" id="back"><b class="icon sq_headerUp"></b></div>
    <span class="sq_headerText">赏金记录</span>
</header>
<style>body{background:#689f38;color:#fff}.bty_icon{background:url(../img/bounty/bountyIcon.png) no-repeat;background-size:200px auto;display:inline-block;vertical-align:middle}.record-nav-list{width:100%;height:43px;margin-top:50px;padding-top:25px}.record-nav-list ul{height:35px;border:1px solid #8bc34a;border-radius:4px;color:#86be48;width:75%;margin:auto;display:-webkit-box;text-align:center;line-height:35px}.record-nav-list ul li{-webkit-box-flex:1}.record-nav-list ul li:nth-child(2){border-left:1px solid #8bc34a;border-right:1px solid #8bc34a}.record-nav-list ul li.on{color:#dcedc8;background-color:#8bc34a}section{margin:10px}section>div{width:100%}section ul{width:100%;height:95px;background-color:#8bc34a;margin-bottom:10px;display:-webkit-box}section ul li:nth-child(1){-webkit-box-flex:.6;padding:20px 0 16px 15px;width:0;font-size:13px;color:#dcedc9}section ul li:nth-child(2){-webkit-box-flex:.38;text-align:right;padding:20px 22px 16px 0;width:0;font-size:12px}.fxBox{position:relative;width:100%;height:18px}.fxBox:before{content:" ";position:absolute;width:12px;height:3px;background-color:#fff;right:23px;top:12px;transform:rotate(-31deg);-webkit-transform:rotate(-31deg)}.fxBox:after{content:" ";position:absolute;width:12px;height:3px;background-color:#fff;right:23px;top:21px;transform:rotate(29deg);-webkit-transform:rotate(29deg)}.fx{display:inline-block;position:relative;height:10px;width:10px;background-color:#fff;border-radius:50%;margin-right:15px}.fx:before{content:" ";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#fff;top:9px;right:17px}.fx:after{content:" ";position:absolute;width:10px;height:10px;border-radius:50%;background-color:#fff;right:0;top:19px}.goAnswer{position:relative;width:100%;height:60px}.goAnswer span{display:inline-block;margin-top:39px;margin-right:15px;border-top:1px solid #fff;padding-top:5px;color:#d1e7b7}.goAnswer:before{content:" ";position:absolute;width:20px;height:7px;background-color:#fff;transform:rotate(-45deg);right:15px;top:15px;-webkit-transform:rotate(-45deg)}.goAnswer:after{content:" ";position:absolute;width:0;height:0;border-right:4px solid #fff;border-top:4px solid transparent;border-bottom:4px solid transparent;top:26px;right:34px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.userQuestion{margin:4px 0;white-space:nowrap}.userName{display:inline-block;margin-bottom:-4px;max-width:160px;text-overflow:ellipsis;overflow:hidden}.stateQuestion{margin-top:26px;margin-right:-8px}.tieSize{font-size:15px;color:#fff}.playWin{color:#ffeb3b}.dataNull{width:100%;margin-top:25px}.nBook{height:63px;width:50px;background-color:#95bc73;border-radius:3px;margin:0 auto;border:1px solid transparent}.nBook+p{text-align:center;color:#95bc73;margin-top:15px}.nBook i{display:block;width:33px;margin:15px auto;border-top:1px solid #689f38}.uInfo{margin-top:49px;height:57px;line-height:57px;width:100%;background:#558b2f;position:relative}.myBox{margin-left:15px}.userImg{width:25px;height:25px;border-radius:50%;border:2px solid #77a259}.gold{width:10px;height:12px;background-position:-40px -38px;margin-right:4px;margin-top:-3px}#myInfo{position:absolute;top:5px;left:55px}#usrName{margin-right:20px}.colorY{color:#ffea3a}.betRecord{width:25px;height:25px;background-position:-120px -11px}#record{float:right;margin-right:15px;color:#d6e0d0}.colorW{color:#fff;opacity:.7}.ft16{font-size:16px;margin:18px}.ruleDiv{background:#8bc34a;height:45px;line-height:45px;border-radius:4px;margin:0 18px;padding:0 13px;font-size:14px;position:relative}.ruleDiv:nth-child(5){margin-top:25px}.ruleDiv i{opacity:.7}.ruleDiv input{margin-left:10%;border:none;background:#8bc34a;height:100%;color:#fff;width:35%;vertical-align:top;font-size:13px}.blurCls{text-align:right;color:#b0d58c}.focusCls{text-align:left}.ruleDiv label{color:#b0d58c;margin-left:10%;height:45px;width:35%;display:inline-block;overflow:hidden;text-overflow:ellipsis;position:absolute}.ruleDiv span{margin-left:5px;font-size:13px}#answerBox{display:-webkit-box;height:96px;margin:0 15px}#answerBox p{-webkit-box-flex:1;border:1px dashed #7cb342;width:0;height:96px;position:relative}#answerBox p:nth-child(2){margin:0 5px}#answerBox p.on{border:1px solid #7cb342;background:#7cb342}#answerBox p.true{border:1px solid #a0a946;background:#a0a946}#answerBox p span{display:inline-block;width:99px;height:85px;position:absolute;right:0;bottom:0;background-size:99px auto}.zq{background:url(../img/bounty/zq.png) no-repeat}.lq{background:url(../img/bounty/lq.png) no-repeat}.pq{background:url(../img/bounty/pq.png) no-repeat}#divBox{background:#8bc34a;border-radius:4px;margin:50px 18px 8px;position:relative;padding-bottom:70px}.answerUserImg{width:54px;height:54px;border-radius:50%;border:5px solid #a2cf6e;position:absolute;left:50%;margin-left:-32px;top:-29px;background:#a2cf6e}.pItem{background:#fff;border-radius:5px;width:10px;height:10px;display:inline-block;margin:0 5px}.sureDiv{background:#ffab00;border-radius:3px;color:#000;font-size:16px;margin:0 13px 50px 13px;height:45px;line-height:47px;text-align:center}.sureDiv.tapped{background:#c68a06}.sureDiv.over{background:#3a591f}#fqPeople{text-align:center;width:100%;padding-top:40px;opacity:.5}.popBox{background:#8bc34a;color:#fff;width:90%;left:5%;height:200px;margin-top:-100px}.popBox .confirmcontent{max-height:90px}.popBox .confirmbutton{font-size:16px;text-align:center;display:-webkit-box;position:absolute;width:100%;bottom:0;height:initial;line-height:40px;border-top:none}.popBox .confirmbutton div{background:#ffab00;color:#000;margin:15px;border-radius:20px}.popBox .confirmbutton div.tapped{background:#628934}.popBox .confirmbutton div:nth-child(2){border-left:none;border-radius:20px}.betHelpBox{position:fixed;width:80%;margin-left:10%;background-color:#8bc34a;height:300px;z-index:150;top:130px;border-radius:10px}.ruleT{position:fixed;left:50%;margin-left:-34px;width:68px;height:53px;background-position:-2px -252px;top:113px;z-index:151}.ruleC{position:fixed;right:18px;top:116px;width:35px;height:35px;background-position:-84px -46px;z-index:151}.ruleText{margin:55px 22px 10px 22px;line-height:normal;height:335px;overflow:scroll;opacity:.7}.ruleMask{position:fixed;width:100%;left:0;top:0;background:#000;opacity:.7;height:100%;z-index:111}.cancelDt{padding-left:10px;font-size:15px;display:inline-block}</style>
<div id="recordList">
    <nav class="record-nav-list">
        <ul><li class="on launch">我发起的</li><li class="challenge">我挑战的</li><li class="notChallenge">未答挑战</li></ul>
    </nav>

    <section>
        <div id="myLaunch" class="hide">

        </div>
        <div id="myChallenge" class="hide">

        </div>
        <div id="notChallenge" class="hide">

        </div>
    </section>


    

</div>
<div class="AnswerBox hide">
    <div class="uInfo">
        <span class="myBox"><img src="" class="userImg"></span>
        <em id="myInfo">
            <span id="usrName"></span><i class="icon gold"></i><cite class="colorY" id="userGold"></cite>
        </em>
        <span id="record"><span class="bty_icon betRecord"></span>游戏规则</span>
        <div class="ruleMask hide"></div>
        <div class="betHelpBox hide">
            <b class="bty_icon ruleT"></b>
            <b class="bty_icon ruleC"></b>
            <div class="ruleText">
                 <span>1、悬赏竞猜游戏中，用户发起题目，设置悬赏金额、指定挑战者、以及设置题目有效期，有效期内挑战者猜中答案则获得该题悬赏的全部金额；
                 <br>2、发起悬赏竞猜，悬赏金额必须为<em id="minGold">1万</em>金币以上；
                 <br>3、发起悬赏竞猜，仅金币可参考竞猜，网站赠送的体验金币不能参与竞猜;
                 <br>4、题目有效期内，如果指定挑战者答题错误那么赏金将会立即退回，若超过有效期挑战者没有答题，题目将关闭，赏金退回给发题用户；
                 <br>5、本游戏解释权归百盈足球所有。</span>
            </div>
        </div>
    </div>
    <div id="divBox">
        <img src="" class="answerUserImg">
        <p id="fqPeople"></p>
        <div class="setAnswer">
            <p class="colorW ft16"><span class="pItem"></span>猜猜我选的是什么？<span id="ballName" style="float:right"></span></p>
            <div id="answerBox">
                <p><span class="zq"></span></p>
                <p><span class="lq"></span></p>
                <p><span class="pq"></span></p>
            </div>
        </div>
        <div>
            <p class="colorW ft16"><span class="pItem"></span>悬赏金额：<em id="bountyMoney">--</em><span class="colorY"> 金币</span></p>
            <p class="colorW ft16"><span class="pItem"></span>答题金额：<em id="bountyMoneyDT">--</em><span class="colorY"> 金币</span></p>
            <p class="colorW ft16" style=""><span class="pItem"></span>截止时间：<em id="bountyTime">--</em></p>
        </div>
    </div>
    <div class="sureDiv">提　交</div>
</div>
<script src="../js/lib/zeptoPpLoadNativeMap.min.js"></script>
<script src="../js/main.js"></script>
<script>var type="1",page=1,ii="",isOneEnd="",isTwoEnd="",isThereEnd="",isAnswer="",isScorll="",isBack=!1,isMyLaunch=!0,isChallenge=!0,isNotChallenge=!0,pageFrom="",inIt=function(){function e(){var e=T.Storage.get("userinfo");$("#userGold").html(e.coin)}var t=function(s){var a="/web/services/offer/recode.json?token="+T.Storage.get("access_token")+"&type="+s+"&page="+page+"&limit=10",i=function(e){var t="";return"10"==e?t="悬赏中":"20"==e?t="已答对":"30"==e?t="答错":"40"==e?t="已过期":"50"==e?t="答错已退款":"60"==e&&(t="已取消"),t},n=function(e){return"1"==e?"足球":"2"==e?"篮球":"排球"};T.Util.xmlHttpRequest({type:"get",reqUrl:a,callback:function(a){var o=a.res_data.value,l=[],r='<div class="dataNull"><p class="nBook"><i></i><i></i><i></i></p><p>暂无数据</p></div>',p="",u="";if("1"==s&&1==page&&($("#myLaunch").empty(),0==o.length))return void $("#myLaunch").html(r).show();if("2"==s&&1==page&&($("#myChallenge").empty(),0==o.length))return void $("#myChallenge").html(r).show();if("3"==s&&1==page&&($("#notChallenge").empty(),0==o.length))return void $("#notChallenge").html(r).show();ii=o.length;for(var c=0;c<ii;c++)"1"==s||"2"==s?(l.push("<ul><li>"),"1"==s?(isOneEnd=ii,p="答题用户:",u=o[c].recode[0]?o[c].recode[0].u_name:o[c].u_name,"10"==o[c].o_status?l.push('<span class="tieSize">答题赏金:</span><span class="tieSize">'+T.Util.parseNumber(parseInt(o[c].o_gratuity)/1e4)+'万</span><span class="cancelDt" data-id="'+o[c].o_id+'">取消</span>'):l.push('<span class="tieSize">答题赏金:</span><span class="tieSize">'+T.Util.parseNumber(parseInt(o[c].o_gratuity))+"</span>")):(isTwoEnd=ii,p="发起用户:",u=o[c].u_name,l.push('<span class="tieSize">答题赏金:</span><span class="tieSize">'+T.Util.parseNumber(o[c].recode[0].o_gratuity)+"</span>")),"1"==s?l.push('<div class="userQuestion"><span>'+p+'</span><span class="userName">'+u+"</span><span>(答案:"+n(o[c].o_result)+")</span></div>"):l.push('<div class="userQuestion"><span>答案:'+n(o[c].o_result)+"</span></div>"),l.push("<span>截止时间:</span><span>"+new Date(o[c].e_time).format("MM/dd hh:mm")+"</span>"),l.push("</li>"),"1"==s?"20"==o[c].o_status?(l.push("<li>"),l.push('<div class="playWin">-'+T.Util.parseNumber(parseInt(o[c].o_gratuity))+"</div>"),l.push('<div class="stateQuestion tieSize playWin">【'+i(o[c].o_status)+"】</div>")):"10"==o[c].o_status?(l.push('<li class="goShare">'),l.push('<div class="fxBox"><i class="fx"></i></div><div style="margin-top:26px;">分享给好友</div>')):(l.push("<li>"),l.push("<div>"+T.Util.parseNumber(parseInt(o[c].o_gratuity))+"</div>"),l.push('<div class="stateQuestion tieSize">【'+i(o[c].o_status)+"】</div>")):"1"==o[c].recode[0].i_success?(l.push("<li>"),l.push('<div class="playWin">'+T.Util.parseNumber(o[c].recode[0].o_gratuity)+"</div>"),l.push('<div class="stateQuestion tieSize playWin">【答对】</div>')):(l.push("<li>"),l.push('<div style="height: 20px;"></div>'),l.push('<div class="stateQuestion tieSize">【答错】</div>')),l.push("</li></ul>")):"3"==s&&(isThereEnd=ii,l.push("<ul><li>"),l.push('<span class="tieSize">答题赏金:</span><span class="tieSize">'+T.Util.parseNumber(o[c].o_gratuity)+"</span>"),l.push('<div class="userQuestion"></div>'),l.push("<span>截止时间:</span><span>"+new Date(o[c].e_time).format("MM/dd hh:mm")+"</span>"),l.push("</li>"),l.push("<li>"),l.push('<div class="goAnswer" data-id="'+o[c].o_id+'" data-state="'+o[c].o_status+'" data-pic="'+o[c].u_pic+'"  data-money="'+o[c].o_gratuity+'" data-time="'+o[c].e_time+'" data-uName="'+o[c].u_name+'" o-prize="'+o[c].o_prize+'"><span>去答题</span></div>'),l.push("</li></ul>"));"1"==s&&($("#myLaunch").append(l.join("")).show(),l.length=0),"2"==s&&($("#myChallenge").append(l.join("")).show(),l.length=0),"3"==s&&isBack?($("#notChallenge").html(l.join("")).show(),l.length=0):"3"!=s||isBack||($("#notChallenge").append(l.join("")).show(),l.length=0),$(".goAnswer").off().Touch(function(e){var t={o_status:$(e).attr("data-state"),u_pic:$(e).attr("data-pic"),o_gratuity:$(e).attr("data-money"),e_time:$(e).attr("data-time"),u_name:$(e).attr("data-uName"),o_id:$(e).attr("data-id"),o_prize:$(e).attr("o-prize")};isScorll=!1,isAnswer=!0,console.log(t),inIt.answer(t),$("#answerBox p").removeClass("on"),$("#ballName").html(""),$(".sureDiv").html("提　交").removeClass("over"),$("#recordList").hide(),$(".AnswerBox").show()}),$(".goShare").off().Touch(function(){var e={url:"http://www.buyinball.com/ny3G/game-byzq/bounty/answer.html",image_src:"http://www.buyinball.com/ny3G/game-byzq/img/bounty/shareLogo.png",text:"悬赏竞猜 领丰厚金币",obj_type:"act",obj_id:"ACT_Bounty"};api.share(e,function(e){})}),$(".cancelDt").off().Touch(function(a){T.Util.xmlHttpRequest({type:"get",reqUrl:"/web/services/offer/cancel.json?token="+T.Storage.get("access_token")+"&o_id="+$(a).attr("data-id"),callback:function(a){console.log(a),tip("取消成功"),page=1,$("#myLaunch").html(""),t(s),T.User.getUInfo(T.Storage.get("access_token"),e)},errorCallback:function(){}})}),$("#record").off().Touch(function(){$(".betHelpBox").show(),$(".ruleMask").show()}),$(".ruleC").off().Touch(function(){$(".betHelpBox").hide(),$(".ruleMask").hide()})},errorCallback:function(){}})};return{answer:function(t){if("10"!=t.o_status)return void tip("该题不在悬赏中！");$("#answerBox p").off().Touch(function(e){if(!$(e).hasClass("on")){$(e).siblings().removeClass("on"),$(e).addClass("on");var t=$("#ballName");switch($(e).index()){case 1:t.html("篮球").data("type",2);break;case 2:t.html("排球").data("type",3);break;default:t.html("足球").data("type",1)}}}),$(".answerUserImg").attr("src",t.u_pic),$("#bountyMoney").html(T.Util.parseNumber(parseInt(t.o_gratuity))),$("#bountyMoneyDT").html(T.Util.parseNumber(parseInt(t.o_prize))),$("#bountyTime").html(new Date(parseInt(t.e_time)).format("MM/dd hh:mm")),$("#fqPeople").html(t.u_name),$(".sureDiv").off().Touch(function(s){var s=$(s);if(!s.hasClass("over")){var a=$("#ballName").data("type");if(T.Util.isEmpty(a))return void tip("请选择答案！");confirm('<p style="font-size:20px;margin-top:-25px;">温馨提醒</p><p style="margin-top:20px;margin-left:10px;">若答对，您将赢得<em style="color:red;margin: 0 5px;display: inline-block;">'+T.Util.parseNumber(parseInt(t.o_gratuity)-parseInt(t.o_prize))+"</em>金币；<br>若答错，不会扣除金币。<br>请在参与活动前仔细核对对方身份。</p>",function(){T.Util.xmlHttpRequest({type:"get",reqUrl:"/web/services/offer/submit.json?token="+T.Storage.get("access_token")+"&o_id="+t.o_id+"&answer="+a,callback:function(a){"1"==a.res_data.value.is_success?t.o_gratuity<t.o_prize?(alert("恭喜你，答题成功！"),s.html("答题成功").addClass("over")):(alert("恭喜你，回答正确</br>获得"+T.Util.parseNumber(parseInt(t.o_gratuity))+"金币！"),s.html("回答正确").addClass("over")):(alert("不好意思，回答错误"),s.html("回答错误").addClass("over")),T.User.getUInfo(T.Storage.get("access_token"),e),console.log(a)},errorCallback:function(){}})},"取消","确认")}})},init:function(){var e=T.Storage.get("userinfo");T.Util.isEmpty(e)||($("#usrName").html(e.nick_name),$("#userGold").html(T.Util.parseNumber(e.coin)),$(".userImg").attr("src",e.portrait_pic)),page=1,t(type),$(".launch").off().Touch(function(e){$(e).addClass("on").siblings().removeClass("on"),$("#myLaunch").show().siblings().hide(),type="1",page=1}),$(".challenge").off().Touch(function(e){$(e).addClass("on").siblings().removeClass("on"),$("#myChallenge").show().siblings().hide(),type="2",page=1,isChallenge&&(t(type),isChallenge=!1)}),$(".notChallenge").off().Touch(function(e){$(e).addClass("on").siblings().removeClass("on"),$("#notChallenge").show().siblings().hide(),type="3",page=1,isNotChallenge&&(t(type),isNotChallenge=!1)}),$("#back").off().Touch(function(){if(isAnswer?(isScorll=!0,isBack=!0,t(type)):isScorll=!1,"block"==$(".AnswerBox ").css("display"))return $("#recordList").show(),void $(".AnswerBox").hide();T.isNative&&api.closeWindow()}),function(){isScorll&&$(window).scroll(function(){var e=$(this).scrollTop(),s=$(document).height(),a=$(this).height();"1"==type&&(ii=isOneEnd),"2"==type&&(ii=isTwoEnd),"3"==type&&(ii=isThereEnd),e+a==s&&ii>=10&&(page=new Number(page)+1,t(type))})}()},getData:t}}();$(function(){function e(){T.Util.isEmpty(T.Util.getParaHash("pageFrom"))||(pageFrom="&pageFrom="+T.Util.getParaHash("pageFrom")),T.isNative&&(T.Util.isEmpty(T.Util.getPara("type"))||"3"!=T.Util.getPara("type"))||(type="3",$(".launch").hide(),$(".notChallenge").siblings().removeClass("on"),$(".notChallenge").addClass("on"),isNotChallenge=!1),"赏金记录"==$(".sq_headerText").html()&&(isScorll=!0),T.Util.xmlHttpRequest({type:"get",reqUrl:"/web/services/template/OFFER_PRO.json",callback:function(e){$("#minGold").html(e.res_data[0].minGold/1e4+"万")},errorCallback:function(e){console.log(e)}}),inIt.init()}T.isNative?(T.appToH5.init(e),Global.isiOS&&(T.Util.addStyleLink("../css/iosBar.css"),812==document.documentElement.clientHeight&&375==document.documentElement.clientWidth?$(".record-nav-list,.uInfo").css("margin-top","88px"):$(".record-nav-list,.uInfo").css("margin-top","64px"))):T.Util.isEmpty(T.Storage.get("access_token"))?(T.Storage.remove("access_token"),T.Storage.remove("userinfo"),e()):T.User.getUInfo(T.Storage.get("access_token"),e)})</script>

</body>
</html>
