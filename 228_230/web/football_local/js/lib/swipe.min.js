function Swipe(m,e){var o,y,A;function u(){i=c.children;B=i.length;2>i.length&&(e.continuous=!1);o&&(e.continuous&&3>i.length)&&(c.appendChild(i[0].cloneNode(!0)),c.appendChild(c.children[1].cloneNode(!0)),i=c.children);k=Array(i.length);d=m.getBoundingClientRect().width||m.offsetWidth;c.style.width=i.length*d+"px";for(var b=i.length;b--;){var n=i[b];n.style.width=d+"px";n.setAttribute("data-index",b);o&&(n.style.left=b*-d+"px",g(b,a>b?-d:a<b?d:0,0))}e.continuous&&o&&(g(h(a-1),-d,0),g(h(a+1),d,0));
o||(c.style.left=a*-d+"px");m.style.visibility="visible"}function v(){e.continuous?t(a+1):a<i.length-1&&t(a+1)}function h(b){return(i.length+b%i.length)%i.length}function t(b,n){if(a!=b){if(o){var c=Math.abs(a-b)/(a-b);if(e.continuous){var f=c,c=-k[h(b)]/d;c!==f&&(b=-c*i.length+b)}for(f=Math.abs(a-b)-1;f--;)g(h((b>a?b:a)-f-1),d*c,0);b=h(b);g(a,d*c,n||l);g(b,0,n||l);e.continuous&&g(h(b-c),-(d*c),0)}else b=h(b),F(a*-d,b*-d,n||l);a=b;c=e.callback&&e.callback(a,i[a]);setTimeout(c||w,0)}}function g(b,
a,c){p(b,a,c);k[b]=a}function p(b,a,c){if(b=(b=i[b])&&b.style)b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=c+"ms",b.webkitTransform="translate("+a+"px,0)translateZ(0)",b.msTransform=b.MozTransform=b.OTransform="translateX("+a+"px)"}function F(b,d,f){if(f)var g=+new Date,h=setInterval(function(){var j=+new Date-g;j>f?(c.style.left=d+"px",q&&(x=setTimeout(v,q)),e.transitionEnd&&e.transitionEnd.call(event,a,i[a]),clearInterval(h)):
c.style.left=(d-b)*(Math.floor(100*(j/f))/100)+b+"px"},4);else c.style.left=d+"px"}function r(){q=0;clearTimeout(x)}var w=function(){};y=!!window.addEventListener;A="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;o=function(b){var a=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"],c;for(c in a)if(void 0!==b.style[a[c]])return!0;return!1}(document.createElement("swipe"));if(m){var c=m.children[0],i,k,d,B,e=e||{},a=parseInt(e.startSlide,
10)||0,l=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var q=e.auto||0,x,C,D,E,f,z,s,j={handleEvent:function(a){switch(a.type){case "touchstart":this.start(a);break;case "touchmove":this.move(a);break;case "touchend":var c=this.end(a);setTimeout(c||w,0);break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "otransitionend":case "transitionend":c=this.transitionEnd(a);setTimeout(c||w,0);break;case "resize":setTimeout(u||w,0)}e.stopPropagation&&a.stopPropagation()},
start:function(a){a=a.touches[0];C=a.pageX;D=a.pageY;E=+new Date;z=f=s=void 0;c.addEventListener("touchmove",this,!1);c.addEventListener("touchend",this,!1)},move:function(b){if(!(1<b.touches.length||b.scale&&1!==b.scale)){e.disableScroll&&b.preventDefault();var c=b.touches[0];f=c.pageX-C;z=c.pageY-D;"undefined"==typeof s&&(s=!!(s||Math.abs(f)<Math.abs(z)));s||(b.preventDefault(),r(),e.continuous?(p(h(a-1),f+k[h(a-1)],0),p(a,f+k[a],0),p(h(a+1),f+k[h(a+1)],0)):(f/=!a&&0<f||a==i.length-1&&0>f?Math.abs(f)/
d+1:1,p(a-1,f+k[a-1],0),p(a,f+k[a],0),p(a+1,f+k[a+1],0)))}},end:function(){var b=250>Number(+new Date-E)&&20<Math.abs(f)||Math.abs(f)>d/2,n=!a&&0<f||a==i.length-1&&0>f;e.continuous&&(n=!1);var m=0>f;s||(b&&!n?(m?(e.continuous?(g(h(a-1),-d,0),g(h(a+2),d,0)):g(a-1,-d,0),g(a,k[a]-d,l),g(h(a+1),k[h(a+1)]-d,l),a=h(a+1)):(e.continuous?(g(h(a+1),d,0),g(h(a-2),-d,0)):g(a+1,d,0),g(a,k[a]+d,l),g(h(a-1),k[h(a-1)]+d,l),a=h(a-1)),e.callback&&e.callback(a,i[a])):e.continuous?(g(h(a-1),-d,l),g(a,0,l),g(h(a+1),d,
l)):(g(a-1,-d,l),g(a,0,l),g(a+1,d,l)));c.removeEventListener("touchmove",j,!1);c.removeEventListener("touchend",j,!1)},transitionEnd:function(b){parseInt(b.target.getAttribute("data-index"),10)==a&&(q&&(x=setTimeout(v,q)),e.transitionEnd&&e.transitionEnd.call(b,a,i[a]))}};u();q&&(x=setTimeout(v,q));y?(A&&c.addEventListener("touchstart",j,!1),o&&(c.addEventListener("webkitTransitionEnd",j,!1),c.addEventListener("msTransitionEnd",j,!1),c.addEventListener("oTransitionEnd",j,!1),c.addEventListener("otransitionend",
j,!1),c.addEventListener("transitionend",j,!1)),window.addEventListener("resize",j,!1)):window.onresize=function(){u()};return{setup:function(){u()},slide:function(a,c){r();t(a,c)},prev:function(){r();e.continuous?t(a-1):a&&t(a-1)},next:function(){r();v()},stop:function(){r()},getPos:function(){return a},getNumSlides:function(){return B},kill:function(){r();c.style.width="";c.style.left="";for(var a=i.length;a--;){var d=i[a];d.style.width="";d.style.left="";o&&p(a,0,0)}if(y){c.removeEventListener("touchstart",
j,false);c.removeEventListener("webkitTransitionEnd",j,false);c.removeEventListener("msTransitionEnd",j,false);c.removeEventListener("oTransitionEnd",j,false);c.removeEventListener("otransitionend",j,false);c.removeEventListener("transitionend",j,false);window.removeEventListener("resize",j,false)}else window.onresize=null}}}}if(window.jQuery||window.Zepto)(function(m){m.fn.Swipe=function(e){return this.each(function(){m(this).data("Swipe",new Swipe(m(this)[0],e))})}})(window.jQuery||window.Zepto);
