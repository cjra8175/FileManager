<style>
.match-nav {
	background: #17171b;
	border-bottom: 1px solid #353539;
	height: 40px;
	line-height: 40px;
	padding-left: 15px;
	position: relative
}

.nav-ulbox li {
	float: left;
	position: relative;
	margin-right: 15px;
	padding: 0 5px;
	font-size: 14px;
	color: #a17454;
}

.nav-ulbox li.on {
	color: #f5dba7
}

.nav-ulbox li.on:after {
	position: absolute;
	bottom: 0;
	left: 0;
	width: 100%;
	height: 3px;
	background: #e0c999;
	content: ''
}

.match-con {
	position: relative;
	background: #fff;
	width: 100%
}

.match-classify {
	position: absolute;
	width: 116px;
	top: 0;
	left: 0;
	height: 100%;
	background: url(../img/classify_bg.png) repeat 0 0 #f3f3f3;
	background-size: 100% auto;
	overflow-y: auto;
	-webkit-overflow-scrolling: touch
}

.match-classify li {
	border-bottom: 1px solid #dbdbdb !important;
	height: 57px;
	line-height: 57px;
	text-indent: 10px;
	font-size: 12px;
	color: #8c8c8c;
	position: relative;
	z-index: 2;
	white-space: nowrap
}

.match-classify li.match-date {
	height: 47px;
	line-height: 18px;
	padding-top: 10px;
	text-align: center;
	text-indent: 0
}

.match-lei {
	padding-right: 6px
}

.match-pic {
	width: 23px;
	height: 23px;
	vertical-align: middle;
	border-radius: 100%
}

.match-classify li.on {
	color: #c11a2c;
	background-color: #fff
}

.concern-list,.match-list {
	margin-left: 126px;
	height: 100%;
	overflow-y: auto;
	-webkit-overflow-scrolling: touch
}

.league-name {
	display: inline-block;
	width: 58px;
	margin-left: -4px;
	vertical-align: middle;
	overflow: hidden;
}

.concern-list {
	margin: 0
}

.concern-list .match-enter {
	right: 0
}

.concern-list .match-intro li,.concern-list .match-intro1 li {
	padding: 10px
}

.match-intro li,.match-intro1 li {
	padding: 10px 0;
	border-bottom: 1px solid #d9d9d9;
	position: relative
}

.match-intro1 li.concern-date {
	height: 36px;
	line-height: 36px;
	padding: 0;
	font-size: 12px;
	color: #ff5000;
	text-align: center
}

.match-time {
	color: #8c8c8c
}

.match-time span {
	margin-left: 6px
}

.match-sum {
	margin-top: 10px;
	position: relative
}

.match-team {
	font-size: 15px;
	color: #000
}

.team-2 {
	display: block;
	padding-top: 6px
}

.concern-list .gun-icon {
	margin: 3px 0 0 0
}

.match-enter .match-enter {
	right: 0
}

.concern-team {
	display: inline-block;
	width: 98px
}

.team-fen {
	color: #309f0e
}

.fen-over {
	color: red
}

.match-time .match-minute {
	color: #ff5000;
	margin-left: 12px
}

.minute-dot {
	vertical-align: 2px;
	margin-left: 3px;
	-webkit-animation: going .7s linear 0s infinite;
	opacity: 0;
	color: #ff5000
}

@-webkit-keyframes going {
	0% {
		opacity: 0
	}

	100% {
		opacity: 1
	}
}

.guan-no,.guan-yes {
	position: absolute;
	top: 50%;
	left: 50%;
	margin-left: -30px;
	margin-top: -8px;
	width: 40px;
	height: 40px;
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAM1BMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzeCmiAAAAAEXRSTlMAsqhZC3BDhiItnJEWOE57ZW/ybVoAAAExSURBVEjHrZVbjsMgDEUx5lEIpN3/aocC6ZUGZ+KMej+ayjocGytSzFdS+BburbsjJ+I7ciLoNXLoVXLoNXLoVfLMar2zRMFZrZ6b3BjoFfLxYLUcepUceo1cp38knvKp9yFJXEn7K2bqyWjUY6Pnmg7hznEjpMuh78EpE9ZSj6jazOTRULrQHHRzZvD2cfUeTRr8Fe3bU8GD1vEuDhqp9px324fG9cFf0eCrhgZPQUODj7+LAbTw7r4WB5E1cp5E+1JsdifjbcykKkKkaYkxLy+EVCzG8bMs1VPPbt/rK0tPccqQacSXv1bTqHTAduu/7OTVTI1J8cBqnv+8vJpERHEMMZqjjxfw8JkYJTtKUV5MyxNwX+g4IODxremXWg8UYTETXg54cTW5nn7aPJv/5QfX+Qgt7ogM+QAAAABJRU5ErkJggg==) no-repeat center center;background-size: 20px 20px
}

.guan-yes {
	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAAM1BMVEUAAAD/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjP/ZjMSD3icAAAAEHRSTlMA8GCAMBDgoCBA0MBwsJBQ4cGkGQAAANtJREFUSMfVkUsOwjAMBfMpifNp6/ufFkGlvgU2jjdIzHoyap/DH/CYLj1HVzxy8sSZiyvOnDxx5NfiyNvxN8UTR96OI78YR96OI++I23lqc2cGJZ9N8fLoLBJHzW271bnD+0IZB730LfIaNQT4azZ824bvsE0fF4DvsOFbNvy+YoNHd9jwDRtkUQ8aQ9RJ04uoN01nkazYTTu/zJT1rugHyywMUxhssh7xuRQSHpzyUSFfvxIxjT7M2O73+Xqw68OM+yh40LVh+scFqWrTjJKCAFV5mhQUiMJveAIr5i0Mir2/2gAAAABJRU5ErkJggg==) no-repeat center center;background-size: 20px 20px
}

.concern-list .guan-no,.concern-list .guan-yes {
	margin-left: -20px
}

.guess-count {
	position: absolute;
	right: 8px;
	top: 50%;
	margin-top: 6px;
	font-size: 10px
}

.matching {
	height: 100%
}

.red-count {
	display: inline-block;
	background: red;
	padding: 0 2px;
	height: 12px;
	line-height: 12px;
	font-size: 8px;
	color: #fff;
	margin-left: 4px;
	border-radius: 2px;
	vertical-align: 3px
}

.match-enter {
	position: absolute;
	right: 10px;
	top: 50%;
	margin-top: -10px
}

.enter-icon {
	display: inline-block;
	width: 6px;
	height: 6px;
	border-right: 1px solid #a4a8b3;
	border-bottom: 1px solid #a4a8b3;
	-webkit-transform: rotate(-45deg);
	margin-left: 3px;
	vertical-align: 1px
}

.gun-icon {
	float: right;
	height: 11px;
	width: 22px;
	padding: 0 3px;
	color: #fff;
	margin: 3px 8px 0 0;
	background: url(../img/award/gunBall@2x.png) no-repeat center center;
	background-size: 22px 11px
}

@media screen and (-webkit-min-device-pixel-ratio:2) {
	.match-classify li,.match-intro li,.match-intro1 li,.match-nav {
		background-position: left bottom;
		background-repeat: repeat-x;
		background-size: 100% 1px;
		background-image: -webkit-gradient(linear,left top,left bottom,color-stop(.5,transparent),color-stop(.5,#d9d9d9),to(#d9d9d9));
		border: 0
	}

	.nHide {
		display: none!important
	}

	.sx-btn {
		bottom: 0
	}

	.add-award-icon {
		float: right;
		width: 22px;
		height: 11px;
		padding: 0 3px;
		color: #fff;
		margin: 3px 2px 0 0;
		background: url(../img/award/addAward@2x.png) no-repeat center center;
		background-size: 22px 11px
	}

	.back-award-icon {
		float: right;
		width: 40px;
		height: 11px;
		padding: 0 3px;
		color: #fff;
		margin: 3px 2px 0 0;
		background: url(../img/award/backAward@2x.png) no-repeat center center;
		background-size: 40px 11px
	}

	.redCircle {
		display: inline-block;
		height: 5px;
		width: 5px;
		background: #ef353a;
		position: absolute;
		border-radius: 100%;
		left: 33px;
		top: 13px
	}

	.hide {
		display: none
	}
}

.match-classify li,.match-intro li,.match-intro1 li,.match-nav {
	background-position: left bottom;
	background-repeat: repeat-x;
	background-size: 100% 1px;
	background-image: -webkit-gradient(linear,left top,left bottom,color-stop(.5,transparent),color-stop(.5,#d9d9d9),to(#d9d9d9));
	border: 0
}

.nHide {
	display: none!important
}

.sx-btn {
	bottom: 0
}
</style>


<section class="match-main">
    <div class="match-nav">
        <ul class="nav-ulbox">
            <li data-type="1" class="on">按时间</li>
            <li data-type="2">按联赛</li>
            <li data-type="3">我的关注</li> <!-- (<span class="myFocus-count">0</span>)-->
			<li data-type="4">投注记录</li>
        </ul>
		<div style="display:none">
			<div class="sx-btn hide" ><a href="javascript:;">筛选</a></div>
		</div>
        
    </div>
    <div class="match-con">
        
        <div class="matching">
            <div class="match-classify">
                <ul>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>

            <div class="match-list" id="match-list">
                <ul class="match-intro" data-type="league">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
            <div class="noRecord no-game one hide"><div class="none-img"></div><div class="txtDesc"><p class="txtTitle">球员还在去往球场的路上，请耐心等候...</p></div><a class="no-enter" href="#page=prePlayList.html">去投注赛前</a></div>
        </div>
        

        
        <div class="concern-list hide" id="myFollowContent">
        </div>
        
    </div>
</section>

<script>
function MyFollowTimer(t, a, e) {
	this.mStatus = a, this.runningTime = e, this.mId = t, this.runController = 0, this.checkStatusController = 0, this._minuteEle = $(".match-intro1[mId='" + t + "'] .match-minute"), this._dotEle = $(".match-intro1[mId='" + t + "'] .minute-dot")
}
function nativeEventInit() {
	$("#myFollowContent").empty(), preListInit.init()
}
var lHeight = $(window).height(),
	mTop = $(".match-nav").offset().top;
/iPhone|iPad|iPod|ios|IOS/.test(window.navigator.userAgent) && /QAPP/.test(window.navigator.userAgent) ? ($(".match-con").css("height", lHeight - mTop - 41), Global.iosAudit && $(".match-con").css("height", lHeight - mTop - 22)) : $(".match-con").css("height", lHeight - mTop - 41), pageFrom = "prePlayList.html", $(".pageBox li").removeClass("on"), $(".pageBox li").eq(0).addClass("on");
var weekObj = {
	1: "星期一",
	2: "星期二",
	3: "星期三",
	4: "星期四",
	5: "星期五",
	6: "星期六",
	7: "星期日"
},
	dropLoad = "",
	myMatchDropLoadObj = "",
	myMatchCanLoadFlag = !0,
	myMatchPageIndex = 1,
	focusedMatchIds = [],
	matchTypeObj = {
		time: ["1", "time"],
		level: ["2", "league"]
	};
Global.sType = T.Util.getPara("sType") || "S", "S" == Global.sType ? ($(".sx-btn").show(), $(".no-enter").html("去投注赛前")) : $(".no-enter").html("去投注足球赛前");
var preListInit = function() {
		function t(t) {
			var a = matchTypeObj[T.Storage.get("prePlayListDataType")][0],
//				e = "/web/services/match/league.json?i_page=2&type=" + a + "&sportType=" + Global.sType;
				e = "/tp5/api/?s=activity/football/getMatchLeft&type=" + a + "&sportType=" + Global.sType;
			T.Util.isEmpty(t) ? !T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) && T.Storage.get("prePlayListFilterData", 1).length && (e = e + "&l_ids=" + T.Storage.get("prePlayListFilterData", 1).join(",")) : e = e + "&l_ids=" + t, T.Util.xmlHttpRequest({
				type: "get",
				reqUrl: e,
				callback: function(t) {
					"1" == a ? (t.lastTime = (new Date).getTime(), T.Storage.set(Global.sType + "prePlayListDataByTime", t, 1)) : (t.lastTime = (new Date).getTime(), T.Storage.set(Global.sType + "prePlayListDataByLevel", t, 1)), preListInit.doHtml(t, a)
				},
				errorCallback: function() {}
			})
		}
		function a(t) {
			T.Util.xmlHttpRequest({
				type: "get",
				authError: t && "ck" == t ? 0 : 1,
				reqUrl: "/tp5/api/?s=activity/football/qry_user_matchs&uid=" + T.Storage.get("uid") + "&token=" + T.Storage.get("token") + "&is_game=1&page_index=" + myMatchPageIndex + "&page_size=20",
				callback: function(a) {
					a.lastTime = (new Date).getTime(), T.Storage.set("prePlayListMyMatchs", a, 1), myMatchCanLoadFlag = !0, preListInit.doMyMatchsHtml(a, t)
				},
				errorCallback: function() {
					"" != myMatchDropLoadObj && (myMatchDropLoadObj.resetload(), myMatchDropLoadObj.unlock(), myMatchDropLoadObj.noData(!1), myMatchDropLoadObj = ""), myMatchCanLoadFlag = !0
				}
			})
		}
		function e(t, a) {
			Global.isiOS;
			var e = matchTypeObj[T.Storage.get("prePlayListDataType")][1],
//				i = "/web/services/match/" + e + "/" + t + ".json?sportType=" + Global.sType;
				i = "/tp5/api/?s=activity/football/getMatchList&type=" + e + "&where=" + t + "&sportType=" + Global.sType;
			!T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) && T.Storage.get("prePlayListFilterData", 1).length && (i += "&l_ids=" + T.Storage.get("prePlayListFilterData", 1).join(",")), T.Util.xmlHttpRequest({
				type: "get",
				reqUrl: i,
				callback: function(a) {
					var i = a.res_data.value,
						s = [],
						o = "";
					if (i && i.length) {
						"league" == e && $('[data-leagueid="' + t + '"]').find("em").html(i.length), $(".match-intro").html("");
						for (m in i) {
							var l = null,
								r = [];
							if (!T.Util.isEmpty(i[m].extraAward) && !T.Util.isEmpty(i[m].extraAward.EXTRA_AWARD) && (l = i[m].extraAward.EXTRA_AWARD, !l.length)) for (var c in l)"0" != c && "1" != c || ("0" == c && l[c] ? "1" == i[m].isInPlay ? r.push('<i class="add-award-icon"></i>') : r.push('<i class="add-award-icon" style="margin-right: 8px;"></i>') : "1" == c && l[c] && ("1" == i[m].isInPlay ? r.push('<i class="back-award-icon"></i>') : "1" != i[m].isInPlay && r.length ? r.push('<i class="back-award-icon"></i>') : r.push('<i class="back-award-icon" style="margin-right: 8px;"></i>')));
							var d = r.join("");
							o = "1" == i[m].isInPlay ? '<i class="gun-icon"></i>' + d : "" + d, s.push('<li data-mid="' + i[m].matchId + '" class="normal-match">'), "time" == e ? s.push('<div class="match-time"><em class="match-lei" style="color:' + i[m].leagueStyle + '">' + i[m].leagueName + "</em>" + new Date(i[m].matchTime).format("hh:mm") + o + "</div>") : s.push('<div class="match-time">' + T.Util.doTimeParse(i[m].matchTime, "day") + "<span>" + new Date(i[m].matchTime).format("hh:mm") + "</span>" + o + "</div>");
							var p = "BB" == Global.sType ? "hide" : "guan-no";
							s.push('<div class="match-sum">                            <div class="match-team">                            <span class="team-1">' + T.Util.notNullValue(i[m].htName, "--") + '</span>                            <span class="team-2">' + T.Util.notNullValue(i[m].gtName, "--") + '</span>                            </div>                            <span class="match-enter"><span class="hide">' + i[m].matchBetCount + '人竞猜</span><i class="enter-icon"></i></span>                    </div><i class="' + p + '"></i>                    </li>')
						}
						$(".match-intro").html(s.join("")), "" != dropLoad && (dropLoad.resetload(), dropLoad.unlock(), dropLoad.noData(!1), dropLoad = ""), n()
					}
				},
				errorCallback: function() {}
			})
		}
		function i(t, a) {
			console.log(t,a);
			if (1 == myMatchPageIndex && ($(".concern-list").empty(), focusedMatchIds = []), 0 == t.qry_user_matchs.page_index ? myMatchCanLoadFlag = !1 : myMatchPageIndex = t.qry_user_matchs.page_index, t.qry_user_matchs.data && t.qry_user_matchs.data.length) {
				var e = "",
					i = "",
					s = !1,
					o = "",
					l = "",
					r = "",
					c = "",
					m = ["日", "一", "二", "三", "四", "五", "六"],
					d = [],
					p = [];
				if ($(".myFocus-count").html(t.qry_user_matchs.total_num), !T.Util.isEmpty(myFollowsTimer) && 0 != myFollowsTimer.size()) {
					var h = myFollowsTimer.valueArray();
					$.each(h, function(t, a) {
						a.clearTimer()
					})
				}
				$.each(t.qry_user_matchs.data, function(t, n) {
					function h() {
						T.Util.mqtt(p, preListInit.onMessageArrived)
					}
					if (e = "", i = "", o = "", s = !1, c = "", l = "", r = "", d.push(n.match_id), focusedMatchIds.push(n.match_id), -1 != "2345".indexOf(n.status_cd)) {
						if (s = !0, e = '<i class="red-count ' + (n.home_red_card & 0 != n.home_red_card ? "" : "nHide") + '">' + n.home_red_card + "</i>", i = '<i class="red-count ' + (n.guest_red_card & 0 != n.guest_red_card ? "" : "nHide") + '">' + n.guest_red_card + "</i>", "5" == n.status_cd) o = '<em class="fen-over">' + n.home_team_score + "</em>", c = '<em class="fen-over">' + n.guest_team_score + "</em>", r = '<span class="match-minute">完场</span>';
						else if (o = '<em class="team-fen">' + n.home_team_score + "</em>", c = '<em class="team-fen">' + n.guest_team_score + "</em>", r = "<span class='match-minute' running_time='" + n.running_time + "'></span><sup class='minute-dot'>'</sup>", p.push("G/E/1/" + n.match_id), p.push("G/E/3/" + n.match_id), void 0 !== a && "ck" == a) try {
//							jsLoad("../js/lib/android-wsMqttws31.min.js", h)
						} catch (t) {
							console.error("mqtt------" + t)
						}
					} else if (n.status_cd >= 6) {
						var g = ["取消", "待定", "加时", "点球", "暂停", "腰斩", "推迟"];
						r = '<span class="match-minute">' + g[n.status_cd - 6] + "</span>"
					}
					n.group_date && (l = '<li class="concern-date">（周' + m[new Date(n.group_date).getDay()] + "）" + n.group_date + "</li>");
					var u = [];
					T.Util.isEmpty(n.is_ext_award) || 1 != n.is_ext_award || u.push('<i class="add-award-icon"></i>'), T.Util.isEmpty(n.is_draw_back) || 1 != n.is_draw_back || u.push('<i class="back-award-icon"></i>');
					var y = u.join("");
					if ($(".concern-list").append('<ul class="match-intro1 hide" mId="' + n.match_id + '" isInplay="' + s + '">' + l + '<li><div class="match-time"><em class="match-lei" style="color:#ca00ca">' + n.league_name + "</em>" + ("" + n.match_time).substring(5, 16) + r + ' <i class="gun-icon hide"></i>' + y + '</div><div class="match-sum"><div class="match-team"><div class="team-1"><span class="concern-team">' + n.home_team_name.substring(0, 5) + e + "</span>" + o + '</div><div class="team-2"><span class="concern-team">' + n.guest_team_name.substring(0, 5) + i + "</span>" + c + '</div></div><span class="match-enter"><span class="match-jcwrap hide"><span class="jc-count"></span>人竞猜</span><i class="enter-icon"></i></span><span class="guess-count hide">已投注<span class="bet-count"></span>单</span></div><i class="guan-yes"></i></li></ul>'), -1 != "234".indexOf(n.status_cd)) {
						myFollowsTimer = new Map;
						var f = new MyFollowTimer(n.match_id, n.status_cd, n.running_time);
						myFollowsTimer.put(n.match_id, f), f.timerStart()
					}
				}), "" != myMatchDropLoadObj && (myMatchDropLoadObj.resetload(), myMatchDropLoadObj.unlock(), myMatchDropLoadObj.noData(!1), myMatchDropLoadObj = ""), 0 == t.qry_user_matchs.page_index && $(".concern-list").append("<p style='text-align: center;line-height:40px;height:40px;margin-top: -1px;'>已加载全部</p>"), $(".match-intro1").off().on("click", function(t) {
					var a = $(".match-intro1").has($(t.target));
					$(t.target).hasClass("guan-yes") ? preListInit.unbandFocus($(a).attr("mId"), function() {
						tip("取消关注成功"), $(a).has($(".concern-date")).length && $(a).next(".match-intro1").length && !$($(a).next(".match-intro1")[0]).has($(".concern-date")).length && $(a).find($(".concern-date")).clone().prependTo($(a).next(".match-intro1")[0]), $(a).remove(), $(".myFocus-count").html(parseInt($(".myFocus-count").html()) - 1), 0 == $(".match-intro1").length && ( $(".concern-list").empty(),$(".concern-list").append("<div class='noRecord no-game one'><div class='none-img'></div><div class='txtDesc'><p class='txtTitle'>空空如也...</p></div></div>") )
					}) : T.isNative && Global.isAndroid && lib.nativeApi.compareVersion("2.4.1") || Global.isiOS && lib.nativeApi.compareVersion("2.3.1") ? api.openPlayGame({
						m_id: $(a).attr("mId")
					}, function() {}) : "true" == $(a).attr("isInplay") ? 
							( typeof(openUrl)=='function' ? openUrl('足球',window.location.origin+"/game/#page=prePlay.html&m_id=" + $(a).attr("mId")) : window.location.href = "#page=inPlay_new.html&m_id=" + $(a).attr("mId") ) : 
							( typeof(openUrl)=='function' ? openUrl('足球',window.location.origin+"/game/#page=prePlay.html&m_id=" + $(a).attr("mId")) : window.location.href = "#page=prePlay.html&m_id=" + $(a).attr("mId") )
				}),
				T.Util.xmlHttpRequest({
					type: "get",
//					reqUrl: "/web/services/order/matchOrder/count?token=" + T.Storage.get("access_token") ,
					reqUrl: "/tp5/api/?s=activity/football/qry_user_count&uid=" + T.Storage.get("uid") + "&token=" + T.Storage.get("token") + "&matchIds=" + d.join(","),
					callback: function(t) {
						if (t.res_data.value && t.res_data.value.length) {
							var a = "";
							$.each(t.res_data.value, function(t, e) {
								a = $(".match-intro1[mId='" + e.MATCH_ID + "']"), $(a).find(".jc-count").html(e.betCount), $(a).find(".bet-count").html(e.cou), $(a).find(".match-jcwrap,.guess-count").removeClass("hide"), 1 == e.inPlay && $(a).find(".gun-icon").removeClass("hide")
							})
						} else $(".match-jcwrap,.guess-count").hide();
						$(".match-intro1").removeClass("hide")
					},
					errorCallback: function() {}
				})
			} else $(".myFocus-count").html("0"), $(".concern-list").append("<div class='noRecord no-record one'><div class='none-img'></div><div class='txtDesc'><p class='txtTitle'>空空荡荡...</p></div></div>");
			$("#loading-new").hide(), n()
		}
		function s(t) {
			var a = matchTypeObj[T.Storage.get("prePlayListDataType")][0];
			Global.isiOS;
			var i = t.res_data.value,
				s = [],
				o = [];
			if (i && i.length) {
				$(".noRecord").hide(), $(".match-list").show(), $(".match-classify").show(), $(".match-classify ul").html(""), $(".match-intro").html("");
				for (var l = "", r = ["日", "一", "二", "三", "四", "五", "六"], c = "", m = "", d = 0; j = i.length, d < j; d++) {
					var p = "hide";
					if (T.Util.isEmpty(i[d].awardFlag) || (p = 1 == i[d].awardFlag ? "" : "hide"), 0 == d) {
						l = "on";
						for (var h = i[0].matchs, g = 0; g < h.length; g++) {
							var u = null,
								y = [];
							if (!T.Util.isEmpty(h[g].extraAward) && !T.Util.isEmpty(h[g].extraAward.EXTRA_AWARD) && (u = h[g].extraAward.EXTRA_AWARD, !u.length)) for (var f in u)"0" != f && "1" != f || ("0" == f && u[f] ? "1" == h[g].isInPlay ? y.push('<i class="add-award-icon"></i>') : y.push('<i class="add-award-icon" style="margin-right: 8px;"></i>') : "1" == f && u[f] && ("1" == h[g].isInPlay ? y.push('<i class="back-award-icon"></i>') : "1" != h[g].isInPlay && y.length ? y.push('<i class="back-award-icon"></i>') : y.push('<i class="back-award-icon" style="margin-right: 8px;"></i>')));
							var v = y.join("");
							c = "1" == h[g].isInPlay ? '<i class="gun-icon"></i>' + v : "" + v, o.push('<li data-mid="' + h[g].matchId + '" class="normal-match">'), 1 == a ? o.push('<div class="match-time"><em class="match-lei" style="color:' + h[g].leagueStyle + '">' + h[g].leagueName + "</em>" + new Date(h[g].matchTime).format("hh:mm") + c + "</div>") : o.push('<div class="match-time">' + T.Util.doTimeParse(h[g].matchTime, "day") + "<span>" + new Date(h[g].matchTime).format("hh:mm") + "</span>" + c + "</div>");
							var b = "BB" == Global.sType ? "hide" : "guan-no";
							o.push('<div class="match-sum">                                <div class="match-team">                                <span class="team-1">' + h[g].htName + '</span>                                <span class="team-2">' + h[g].gtName + '</span>                                </div>                                <span class="match-enter"><span class="hide">' + h[g].matchBetCount + '人竞猜</span><i class="enter-icon"></i></span>                        </div><i class="' + b + '"></i>                        </li>')
						}
					} else l = "";
					1 == a ? s.push('<li class="match-date ' + l + '" data-leagueid = "' + i[d].groupData + '">星期' + r[new Date(new Date(i[d].groupData.replace(/-/g, "/")).getTime()).getDay()] + " (" + i[d].matchCount + ")<br>" + new Date(i[d].groupData.replace(/-/g, "/")).format("YYYY/MM/dd") + "</li>") : (m = i[d].leagueLogo, T.Util.isEmpty(i[d].leagueLogo) && (m = "../img/league_default.png"), !T.Util.isEmpty(i[d].leagueName) && i[d].leagueName.length >= 6 && (i[d].leagueName = i[d].leagueName.slice(0, 5)), s.push('<li class="' + l + '" data-leagueid = "' + i[d].leagueId + '"><i class="redCircle ' + p + '"></i><img src="' + m + '" class="match-pic" onerror="preListInit.showDefaultPic(this)"><span class="league-name">' + i[d].leagueName + " </span>(<em>" + i[d].matchCount + "</em>)</li>"))
				}
				$(".match-classify ul").html(s.join(""));
				var _ = T.Storage.get("preMatch-data-leagueid", 1);
				!T.Util.isEmpty(_) && $("li[data-leagueid='" + _ + "']").length > 0 ? ($("li[data-leagueid='" + _ + "']").addClass("on").siblings().removeClass("on"), e(_)) : $(".match-intro").html(o.join("")), T.Storage.get("match-top", 1) && ($(".match-classify").scrollTop(T.Storage.get("match-top", 1)[0]), setTimeout(function() {
					$(".match-list").scrollTop(T.Storage.get("match-top", 1)[1])
				}, 200)), s.length = 0, o.length = 0
			} else $("#loading-new").hide(), $(".sx-btn").hide(), $(".noRecord").show(), $(".match-list").hide(), $(".match-classify").hide();
			if ($(".match-classify li").off().Touch(function(t) {
				$(t).hasClass("on") || (T.Storage.set("preMatch-data-leagueid", $(t).attr("data-leagueid"), 1), $(t).addClass("on").siblings().removeClass("on"), 1 == $(".nav-ulbox li.on").attr("data-type") ? e($(t).attr("data-leagueid")) : 2 == $(".nav-ulbox li.on").attr("data-type") && e($(t).attr("data-leagueid")))
			}), "" != dropLoad && (dropLoad.resetload(), dropLoad.unlock(), dropLoad.noData(!1), dropLoad = ""), sysMessageObj.init(), !T.Util.isEmpty(T.Storage.get("match-top", 1))) {
				var L = T.Storage.get("match-top", 1),
					S = (T.Storage.get("preMatch-data-type", 1), T.Storage.get("preMatch-data-leagueid", 1));
				T.Util.isEmpty(S) ? L && ($(".match-classify").scrollTop(T.Storage.get("match-top", 1)[0]), $(".match-list").scrollTop(T.Storage.get("match-top", 1)[1])) : T.Util.isEmpty(L) && T.Util.isEmpty(S) || $("li[data-leagueid='" + S + "']").length > 0 && ($(".match-classify").scrollTop(T.Storage.get("match-top", 1)[0]), $(".match-list").scrollTop(T.Storage.get("match-top", 1)[1]))
			}
			$("#loading-new").hide(), n()
		}
		function o(t, a) {
			T.Util.xmlHttpRequest({
				type: "get",
				reqUrl: "/tp5/api/?s=activity/football/add_user_match&uid=" + T.Storage.get("uid") + "&token=" + T.Storage.get("token") + "&match_id=" + t,
				callback: function(e) {
					focusedMatchIds.push(t), a && "function" == typeof a && a()
				},
				errorCallback: function() {}
			})
		}
		function l(t, a) {
			T.Util.xmlHttpRequest({
				type: "get",
				reqUrl: "/tp5/api/?s=activity/football/del_user_match&uid=" + T.Storage.get("uid") + "&token=" + T.Storage.get("token") + "&match_id=" + t,
				callback: function(e) {
					$.each(focusedMatchIds, function(a, e) {
						e == t && focusedMatchIds.splice(a, 1)
					}), a && "function" == typeof a && a()
				},
				errorCallback: function() {}
			})
		}
		function n() {
			$(".normal-match .guan-yes").removeClass("guan-yes").addClass("guan-no"), $.each(focusedMatchIds, function(t, a) {
				$(".normal-match[data-mid='" + a + "'] .guan-no").removeClass("guan-no").addClass("guan-yes")
			}), r()
		}
		function r() {
			$("li[data-mid]").off().Touch(function(t, a) {
				var t = $("li[data-mid]").has($(a.target));
				if ($(a.target).hasClass("guan-no") || $(a.target).hasClass("guan-yes")) {
//					if (T.Util.isEmpty(T.Storage.get("access_token"))) return T.Util.login(), !1;
					$(a.target).hasClass("guan-no") ? preListInit.bandFocus($(t).attr("data-mid"), function() {
						tip("添加关注成功"), $(a.target).removeClass("guan-no").addClass("guan-yes"), $(".myFocus-count").html(parseInt($(".myFocus-count").html()) + 1)
					}) : preListInit.unbandFocus($(t).attr("data-mid"), function() {
						tip("取消关注成功"), $(a.target).removeClass("guan-yes").addClass("guan-no"), $(".myFocus-count").html(parseInt($(".myFocus-count").html()) - 1)
					})
				} else void 0 !== $(t).attr("data-mid") && (T.Util.isEmpty($(".match-classify ul li:first-child").attr("data-leagueid")) || T.Storage.set("preMatch-data-leagueid", $(".match-classify li.on").attr("data-leagueid"), 1), T.Storage.set("match-top", [$(".match-classify").scrollTop(), $(".match-list").scrollTop()], 1), T.Storage.set("preMatch-data-type", $(t).parent().attr("data-type"), 1), "BB" == Global.sType ? T.isNative && lib.nativeApi.compareJSSDKVersion("1.0.1") ? api.openPlayGame({
					m_id: $(t).attr("data-mid"),
					sType: "BB",
					tab: "JC"
				}, function() {}) : T.Util.openWindow(T.Util.getRootPath() + "/" + Global.webRoot + "/game/basketPlay.html?m_id=" + $(t).attr("data-mid")) : T.isNative && Global.isAndroid && lib.nativeApi.compareVersion("2.4.1") || Global.isiOS && lib.nativeApi.compareVersion("2.3.1") ? api.openPlayGame({
					m_id: $(t).attr("data-mid")
				}, function() {}) : ( typeof(openUrl)=='function' ?  ( tmpurl = window.location.origin+"/game/#page=prePlay.html&m_id=" + $(t).attr("data-mid"),openUrl('赛前', tmpurl) ) : window.location.href = "#page=prePlay.html&m_id=" + $(t).attr("data-mid") ) )
			}, {
				noRepeat: 1
			})
		}
		function c() {
			T.Util.isEmpty(T.Storage.get("access_token")) || T.Util.isEmpty(T.Storage.get("signedUserNo")) || T.Storage.get("userinfo").user_no == T.Storage.get("signedUserNo") || signInfo.isFirstShowSign || (signInfo.isFirstShowSign = !0), !T.Util.isEmpty(T.Storage.get("access_token")) && signInfo.isFirstShowSign && (T.Util.isEmpty(T.Storage.get("userinfo")) || "14" == T.Storage.get("userinfo").user_type ? $("#task").hide() : T.Util.xmlHttpRequest({
				type: "get",
				reqUrl: "/forum/api/user/sign/conf?access_token=" + T.Storage.get("access_token"),
				callback: function(t) {
					t.sign_conf && 2 == t.sign_conf.isSign && (SignObj.init(t), signInfo.isFirstShowSign = !1)
				},
				errorCallback: function() {}
			}))
		}
		function d(t) {
			if (t.payloadString && "" != t.payloadString) {
				var a = JSON.parse(t.payloadString),
					e = a.mId;
				if ($(".match-intro1[mId='" + e + "']").length) {
					var i = $(".match-intro1[mId='" + e + "']");
					switch ("" + a.msgType) {
					case "1":
						if ("CARD_R" == a.evtCd) if ("H" == a.tFlg) {
							var s = $(i).find(".team-1 .red-count");
							$(s).removeClass("nHide").html(parseInt($(s).html()) + 1)
						} else {
							var o = $(i).find(".team-2 .red-count");
							$(o).removeClass("nHide").html(parseInt($(o).html()) + 1)
						}
						break;
					case "3":
						var l = a.score.split(":");
						l && 2 == l.length && ($(i).find(".team-1 .team-fen").html(l[0]), $(i).find(".team-2 .team-fen").html(l[1]))
					}
					delete a
				}
			}
		}
		function p() {
//			getMatchCountInfo(), window.clearInterval(getMatchCountTimer), getMatchCountTimer = setInterval(function() {
//				getMatchCountInfo()
//			}, 6e4),
			getConfigInfo(function(t) {
				t && 2 != t && c()
			}), getExtendFlag(function(t) {
				"1" == t ? $(".listIcoBox li#extend").removeClass("hide") : $(".listIcoBox li#extend").addClass("hide")
			}), $("i[data-href]").off().Touch(function(t) {
				if ("#page=betDetail.html" == $(t).data("href") && T.Util.isEmpty(T.Storage.get("access_token"))) return void T.Util.login();
				T.Util.openWindow(T.Util.getRootPath() + "/" + Global.webRoot + "/game/index.html" + $(t).data("href"))
			});
			var t = !1;
			"time" == T.Storage.get("prePlayListDataType") ? ( 
					$("li[data-type='1']").addClass("on").siblings().removeClass("on"),
					$(".match-intro").attr("data-type", "time"),
					T.Storage.set("prePlayListDataType", "time"),
					
					!T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByTime", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByTime", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByTime", 1), "1") : 
					T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) ? preListInit.getData() : preListInit.getData(T.Storage.get("prePlayListFilterData", 1).join(",")))
			: "guanzhu" != T.Storage.get("prePlayListDataType") || T.Util.isEmpty(T.Storage.get("access_token")) || "S" != Global.sType ? ($("li[data-type='2']").addClass("on").siblings().removeClass("on"), $(".match-intro").attr("data-type", "league"), T.Storage.set("prePlayListDataType", "level"), !T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByLevel", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1), "2") : T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) ? preListInit.getData() : preListInit.getData(T.Storage.get("prePlayListFilterData", 1).join(","))) : ($("li[data-type='3']").addClass("on").siblings().removeClass("on"), $(".match-list,.matching").hide(), $(".match-classify").hide(), $(".concern-list").show(), $("#myFollowContent").empty(), t = !0, preListInit.getMyMatchs()), T.Util.isEmpty(T.Storage.get("access_token")) || t || preListInit.getMyMatchs(), 
			$(".nav-ulbox li").off().Touch(function(t) {
				if(4 == $(t).data("type")){
					( typeof(openUrl)=='function' ? openUrl('投注记录',window.location.origin+"/game/#page=betDetail.html") : window.location.href = "#page=betDetail.html" );
					return;
				} 
				if (!$(t).hasClass("on")) {
					if (T.Storage.set("match-top", [0, 0], 1), $(".concern-list").hide(), $(".match-list,.matching").show(), $(".match-classify").show(), $(t).addClass("on").siblings().removeClass("on"), "" != dropLoad && $(".nav-ulbox li").index($(".nav-ulbox li.on")) < 2 && (dropLoad.unlock(), dropLoad.noData(!1), dropLoad.resetload()), "" != myMatchDropLoadObj && 2 == $(".nav-ulbox li").index($(".nav-ulbox li.on")) && (myMatchDropLoadObj.unlock(), myMatchDropLoadObj.noData(!1), myMatchDropLoadObj.resetload(), myMatchDropLoadObj = ""), !T.Util.isEmpty(myFollowsTimer) && 0 != myFollowsTimer.size()) {
						var a = myFollowsTimer.valueArray();
						$.each(a, function(t, a) {
							a.clearTimer()
						})
					}
					if (T.Storage.remove("prePlayListFilterData", 1), 2 == $(t).data("type")) $(".match-intro").attr("data-type", "league"), T.Storage.set("prePlayListDataType", "level"), !T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByLevel", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1)) : preListInit.getData();
					else if (1 == $(t).data("type")) $(".match-intro").attr("data-type", "time"), T.Storage.set("prePlayListDataType", "time"), !T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByTime", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByTime", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByTime", 1), "1") : preListInit.getData();
					else {
//						if (T.Storage.set("prePlayListDataType", "guanzhu"), T.Util.isEmpty(T.Storage.get("access_token"))) rT.Util.login(), !1eturn T.Util.login(), !1;
						T.Storage.set("prePlayListDataType", "guanzhu");
						$(".noRecord").hide(), $(".match-list,.matching").hide(), $(".match-classify").hide(), $("#myFollowContent").empty(), myMatchPageIndex = 1, myMatchCanLoadFlag = !0, preListInit.getMyMatchs("ck"), $(".concern-list").show()
					}
				}
			})
		}
		function h() {
			switch ($(".nav-ulbox li").index($(".nav-ulbox li.on"))) {
			case 0:
				$("li[data-type='1']").addClass("on").siblings().removeClass("on"), $(".match-intro").attr("data-type", "time"), T.Storage.set("prePlayListDataType", "time"), !T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByTime", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByTime", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByTime", 1), "1") : T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) ? preListInit.getData() : preListInit.getData(T.Storage.get("prePlayListFilterData", 1).join(","));
				break;
			case 1:
				$("li[data-type='2']").addClass("on").siblings().removeClass("on"), $(".match-intro").attr("data-type", "league"), T.Storage.set("prePlayListDataType", "level"), !T.Util.isEmpty(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1)) && (new Date).getTime() - T.Storage.get(Global.sType + "prePlayListDataByLevel", 1).lastTime < 6e4 ? preListInit.doHtml(T.Storage.get(Global.sType + "prePlayListDataByLevel", 1), "2") : T.Util.isEmpty(T.Storage.get("prePlayListFilterData", 1)) ? preListInit.getData() : preListInit.getData(T.Storage.get("prePlayListFilterData", 1).join(","));
				break;
			case 2:
				$("li[data-type='3']").addClass("on").siblings().removeClass("on"), $(".match-list,.matching").hide(), $(".match-classify").hide(), $(".concern-list").show(), $("#myFollowContent").empty(), preListInit.getMyMatchs();
				break;
			case 3:
				console.log('1111');
				break;
			}
		}
		function g(t) {
			$(t).attr("src", "../img/league_default.png")
		}
		return {
			init: p,
			doHtml: s,
			getData: t,
			doMyMatchsHtml: i,
			getMyMatchs: a,
			showDefaultPic: g,
			bandFocus: o,
			unbandFocus: l,
			onMessageArrived: d,
			refreshData: h
		}
	}();
MyFollowTimer.prototype.timerStart = function() {
	if (2 == this.mStatus || 4 == this.mStatus) {
		window.clearInterval(this.runController);
		var t = this;
		this.runController = setInterval(function() {
			t.intervalFun()
		}, 1e3)
	} else 3 == this.mStatus && (this._minuteEle.html("半场结束"), this._dotEle.addClass("hide"), this.checkStatus())
}, MyFollowTimer.prototype.checkStatus = function() {
	var t = this;
	this.checkStatusController = setInterval(function() {
		T.Util.xmlHttpRequest({
			type: "get",
			reqUrl: "/web/services/match/state.json?m_id=" + t.mId + "&random=" + Math.random(),
			callback: function(a) {
				void 0 !== a.res_data && a.res_data.length && parseInt(a.res_data[0].m_status) > parseInt(t.mStatus) && (t.mStatus = a.res_data[0].m_status, 3 == t.mStatus ? (window.clearInterval(t.runController), t._minuteEle.html("半场结束"), t._dotEle.addClass("hide")) : 4 == t.mStatus ? (window.clearInterval(t.checkStatusController), t.runningTime = 2700, t.timerStart()) : 5 == t.mStatus && (t.clearTimer(), t._minuteEle.html("完场"), t._dotEle.addClass("hide")))
			},
			errorCallback: function(t) {}
		})
	}, 5e3)
}, MyFollowTimer.prototype.intervalFun = function() {
	if (this.runningTime += 1, 2 == this.mStatus && this.runningTime >= 2700 || 4 == this.mStatus && this.runningTime >= 5400) {
		2 == this.mStatus && this._minuteEle.html("45+"), 4 == this.mStatus && this._minuteEle.html("90+"), this._minuteEle.removeClass("minute-dot");
		var t = this;
		this.clearTimer(), setTimeout(function() {
			t.checkStatus()
		}, 300)
	} else {
		var a = parseInt(parseInt(this.runningTime) / 60);
		$(this._minuteEle).html(a)
	}
}, MyFollowTimer.prototype.clearTimer = function() {
	window.clearInterval(this.runController), window.clearInterval(this.checkStatusController)
}, $(document).ready(function() {
	$("#createPKRoom").hide(),
	$("#pkRule").hide(),
	$("#betRecord").show(),
	T.Util.isEmpty(Global.app) || "bylq" != Global.app ? "BB" == Global.sType ? ($(".guess-header .guess-nav span").removeClass("on").eq(1).addClass("on"), $(".nav-ulbox [data-type='3']").hide()) : $(".guess-header .guess-nav span").removeClass("on").eq(0).addClass("on") : "BB" == Global.sType ? ($(".guess-header .guess-nav span").removeClass("on").eq(0).addClass("on"), $(".nav-ulbox [data-type='3']").hide()) : $(".guess-header .guess-nav span").removeClass("on").eq(1).addClass("on"), $(".menu-home").removeClass("hide"), $("#indexPageBox").show(), dropLoad = $("#match-list").off().dropload({
		loadUpFn: function(t) {
			dropLoad = t, dropLoad.resetload(), dropLoad.unlock(), dropLoad.noData(!1), getMatchCountInfo(), preListInit.refreshData()
		},
		threshold: 50,
		autoLoad: !1
	}), myMatchDropLoadObj = $("#myFollowContent").off().dropload({
		scrollArea: $("#myFollowContent"),
		loadUpFn: function(t) {
			myMatchDropLoadObj = t, myMatchDropLoadObj.resetload(), myMatchDropLoadObj.unlock(), myMatchDropLoadObj.noData(!1), myMatchCanLoadFlag = !0, myMatchPageIndex = 1, preListInit.getMyMatchs()
		},
		threshold: 50,
		autoLoad: !1
	}), preListInit.init()
})	
</script>