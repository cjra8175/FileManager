<style>article{width:100%;padding-top:10px}.box{display:-webkit-box;border-bottom:1px solid #e8e8e8;color:#666;width:100%}.box p{-webkit-box-flex:1;width:0;background:#fff;height:35px;line-height:35px;text-align:center;border-right:1px solid #e8e8e8}.box p:last-child{border-right:none}.box p:nth-child(2){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.noDataBox{text-align:center;width:100%;margin-top:30%;color:#666;font-size:13px}</style>
<article id="detailBox">
    <div class="box">
        <p>时间</p>
        <p>事项</p>
        <p>钻石变动</p>
        
    </div>
</article>
<script>function loadMoreData(){var a=$(this).scrollTop(),e=$(document).height();a+$(this).height()>=e&&(hasMore?Init.getData():tip("已无更多数据"))}/iPhone|iPad|iPod|ios|IOS/.test(window.navigator.userAgent)&&(812==document.documentElement.clientHeight&&375==document.documentElement.clientWidth?($(".sq_header").css("padding-top","40px"),$(".main.main_b").css("padding-top","88px")):($(".sq_header").css("padding-top","16px"),$(".main.main_b").css("padding-top","64px"))),$(".sq_headerText").html("钻石明细");var page_index=1,page_size=20,hasMore=!0;$("#loading-new").hide();var Init=function(){function a(){T.Util.xmlHttpRequest({reqUrl:"/app-web/api/qryAcct/qry_acct_logs",reqData:{qry_acct_logs:{access_token:T.Storage.get("access_token"),acct_type:1,page_index:page_index,page_size:page_size}},callback:function(a){console.log(a);var e=a.qry_acct_logs.data;page_index=a.qry_acct_logs.page_index;var t=e.length,n=[];if(0==t)return n.push('<div class="noDataBox"><span class="noData"></span><p>暂无历史明细</p></div>'),$("#detailBox").append(n.join("")),hasMore=!1,!1;var o={1:"购买钻石",2:"兑换金币"},i="";console.log(a.qry_acct_logs.page_index),"0"==a.qry_acct_logs.page_index&&(hasMore=!1);for(var p=0;p<t;p++){i=new Date(e[p].crt_time).format("YYYY-MM-dd");var c="";c=e[p].opt_name?e[p].opt_name:o[e[p].opt_type],n.push('<div class="box"><p>'+i+"</p><p>"+c+"</p><p>"+T.Util.parseNumber(e[p].opt_val)+"</p></div>")}$("#detailBox").append(n.join(""))},errorCallback:function(){}})}function e(){Init.getData()}return{init:e,getData:a}}();$(document).ready(function(){Init.init(),$(window).scroll(loadMoreData)})</script>