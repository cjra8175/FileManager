<style>
.hide {
	display: none
}

.mainBox {
	width: 100%;
	color: #74777d;
	padding-bottom: 50px
}

.gt {
	height: 17px;
	width: 6px;
	background-position: -233px -119px;
	vertical-align: middle;
	margin-top: -2px;
	margin-left: -11px
}

.box_min {
	width: 100%;
	height: 45px;
	line-height: 45px
}

.gq_sz {
	color: #ff5722;
	margin-left: 2px
}

.on .gq_sz {
	color: #fbfcfd
}

.gq_zz {
	font-size: 14px;
	margin-right: 3px;
	color: #333
}

.on .gq_zz {
	color: #fbfcfd
}

.gq_bf {
	font-size: 22px;
	color: #43a047;
	position: absolute;
	right: 13%;
	top: 0
}

.gq_na {
	font-size: 15px;
	color: #333;
	float: left;
	margin-left: 10px
}

.gq_bfBox {
	width: 100%
}

.match-nav {
	border-bottom: 0
}

.gq_gt {
	position: absolute;
	right: 5px;
	top: 21px
}

.gq_box1 {
	background-color: #222a34;
	height: 34px;
	line-height: 34px;
	text-align: center;
	border-bottom: 1px solid #171d26;
	float: left;
	width: 100%
}

.gq_box1 p {
	float: left
}

.gq_one {
	width: 40%;
	text-align: left
}

.gq_one>b {
	display: inline-block;
	height: 20px;
	background-color: #bf360c;
	width: 4px;
	margin-bottom: -6px;
	margin-right: 10px
}

.gq_two {
	width: 30%;
	border-left: 1px solid #171d26;
	border-right: 1px solid #171d26
}

.gq_there {
	width: 28%
}

.game_title_wrap {
	background: #dadfe2;
	height: 30px;
	line-height: 30px;
	text-align: center;
	border-bottom: 1px solid #ebeef0;
	display: -webkit-box;
	width: 100%
}

.leagueInfo {
	-webkit-box-flex: 4;
	width: 0;
	height: 100%;
	position: relative;
	text-align: left;
	white-space: nowrap
}

.playTitleFirst {
	margin-left: 1px
}

.playTitle {
	-webkit-box-flex: 3;
	width: 0;
	height: 100%
}

.playInfoWrap,.teamInfoWrap {
	background-color: #fff;
	height: 42px;
	line-height: 42px;
	text-align: center;
	height: 100%;
	display: -webkit-box;
	-webkit-box-orient: vertical
}

.playInfoWrap p,.teamInfoWrap p {
	-webkit-box-flex: 1;
	height: 0%;
	width: 100%
}

.playInfoWrap p {
	border-left: 1px solid #ebeef0
}

.playInfoWrap {
	font-size: 14px
}

.ht_first,.ht_second {
	border-bottom: 1px solid #ebeef0
}

.gq_box2 {
	background-color: #2f3742;
	height: 39px;
	line-height: 39px;
	text-align: center;
	float: left;
	width: 100%
}

.gq_box2 p {
	float: left
}

.gq1_one {
	width: 40%;
	height: 42px;
	position: relative;
	line-height: 47px
}

.gq1_one>b {
	display: inline-block;
	width: 17px;
	height: 17px;
	position: absolute;
	left: 10px;
	top: 15px
}

.gq1_one>b>img {
	width: 100%;
	vertical-align: top
}

.gq1_two {
	width: 30%;
	border-left: 1px solid #171d26
}

.gq1_there {
	width: 28%;
	border-left: 1px solid #171d26
}

.gq_box3 {
	background-color: #2f3742;
	height: 39px;
	line-height: 39px;
	text-align: center;
	float: left;
	border-top: 1px solid #171d26;
	width: 100%
}

.gq_box3 p {
	float: left
}

.gq2_one {
	width: 40%;
	height: 42px;
	margin-top: -2px;
	position: relative;
	line-height: 42px
}

.gq2_one>b {
	display: inline-block;
	width: 17px;
	height: 17px;
	position: absolute;
	left: 10px;
	top: 14px
}

.gq2_one>b>img {
	width: 100%;
	vertical-align: top
}

.gq2_two {
	width: 30%;
	border-left: 1px solid #171d26
}

.gq2_there {
	width: 28%;
	border-left: 1px solid #171d26
}

.oper_box {
	display: -webkit-box;
	padding-right: 10px;
	width: 50%;
	float: right
}

.game_rule {
	margin-right: 10px;
	-webkit-box-flex: 1
}

.teamImg {
	width: 17px;
	height: 17px;
	border-radius: 11px
}

.bet_cite.on {
	background: #ff5b06
}

.gameContainer {
	width: 100%;
	height: 84px;
	display: -webkit-box;
	max-width: 100%;
	overflow: hidden
}

.teamInfoWrap {
	-webkit-box-flex: 4;
	width: 0;
	position: relative
}

.playInfoWrap {
	-webkit-box-flex: 3;
	width: 0
}

.locked {
	color: #ff5b06;
	opacity: .7
}

.blick_point {
	position: absolute;
	right: 10%;
	top: 0
}

.leagueFilterBtn {
	margin-left: 0
}

.red-count {
	display: inline-block;
	background: red;
	padding: 0 2px;
	height: 14px;
	line-height: 14px;
	font-size: 8px;
	color: #fff;
	margin-left: 4px;
	border-radius: 3px
}

.nHide {
	display: none!important
}

.sx-btn {
	bottom: 0
}

</style>

<section class="match-main">
<div class="match-nav hide">
	<div class="sx-btn"><a href="javascript:;">筛选</a></div>
</div>
<div class="mainBox">
    <div class="game_container" id="groundGameList">
    	
    </div>
</div>
</section>
<script>
function nativeEventInit() {
	Global.hasHeiping && ($("#betslipBar").addClass("initHide"), ShopCar && ShopCar.hide(), $("#mask").hide(), $("#pay-list").empty(), Init.init(), Global.hasHeiping = !1), MaxBetMoneyInfo.checkBetInfoAfterLogin()
}
function closeBeforeBack() {
	if (!T.Util.isEmpty(footballGameTimer) && 0 != footballGameTimer.size()) {
		var e = footballGameTimer.valueArray();
		$.each(e, function(e, a) {
			a.clearTimer()
		})
	}
	footballGameTimer = new Map
}
$(".pageBox li").removeClass("on"), $(".pageBox li").eq(1).addClass("on"), pageFrom = "inPlayList.html";
var groundLeaguesMap = new Map,
	message_arr = [],
	selectedLeagues = [],
	tmpMatchinfo = {},
	cgDropLoad = "";
Global.sType = T.Util.getPara("sType") || "S",
"S" == Global.sType ? ( $(".sx-btn").hide(), $("#gameWeb").addClass("on").siblings().removeClass("on") ) : $("#LQWeb").addClass("on").siblings().removeClass("on");

var Init = function() {
		var e = {
				code: "70102",
				name: "当前让球",
				lqName: "全场让分"
			},
			a = {
				code: "70104",
				name: "全场大小"
			},
			t = function() {
				$("#mask").hide(), getMatchCountInfo(), window.clearInterval(getMatchCountTimer), l(), $("i[data-href]").off().Touch(function(e) {
					if ("#page=betDetail.html" == $(e).data("href") && T.Util.isEmpty(T.Storage.get("access_token"))) return void T.Util.login();
					T.Util.openWindow(T.Util.getRootPath() + "/" + Global.webRoot + "/game/index.html" + $(e).data("href"))
				})
			},
			i = function(t) {
				function i() {
					console.log('start mqtt');
//					T.Util.mqtt(message_arr, Init.onMessageArrived)
				}
				$("#loading-new").hide(), $(".mainBox .noRecord").remove();
				var s = "BB" == Global.sType ? t.res_data.info : t.res_data.inplay.data;
				if ($(".game_container").empty(), s.length) {
					t.lastTime = (new Date).getTime(), T.Storage.set(Global.sType + "inplayListData", t, 1);//, $(".match-nav").show();
					var l = "";
					Global.isiOS && (l = "font-weight:bold;"), groundLeaguesMap.clear(), message_arr = [];
					var o = [];
					groundLeaguesMap.clear(),
					$.each(s, function(t, i) {
						console.log(t,i);
						var s = "BB" == Global.sType ? i.MATCH_ID : i.m_id,
							n = "BB" == Global.sType ? i.LEAGUE_ID : i.l_id,
							p = "BB" == Global.sType ? i.TIME_REMAINING_IN_PHASE : i.r_time,
							r = "BB" == Global.sType ? i.STATUS_ID : i.m_status,
							c = "BB" == Global.sType ? i.LEAGUE_NAME : i.l_name,
							m = ("BB" == Global.sType ? i.HOME_TEAM_NAME : i.ht_name).substring(0, 4),
							_ = ("BB" == Global.sType ? i.AWAY_TEAM_NAME : i.gt_name).substring(0, 4),
							f = "BB" == Global.sType ? i.HOME_SCORE_CURRENT : i.ht_score,
							h = "BB" == Global.sType ? i.AWAY_SCORE_CURRENT : i.gt_score,
							g = "BB" == Global.sType ? i.MATCH_TIME : i.m_time,
							y = "BB" == Global.sType ? i.ODD_INFO : i.playList,
							matchId = i.matchId,
							awayScore = i.gt_score,
							homeScore = i.ht_score;
						if (!T.Util.isEmpty(m) && !T.Util.isEmpty(_)) {
							"BB" == Global.sType ? (message_arr.push("G/E/1/" + s), message_arr.push("G/E/3/" + s), message_arr.push("G/E/4/" + s), message_arr.push("G/E/2/" + s + "/+"), message_arr.push("G/E/7/" + s)) : (message_arr.push("G/E/1/" + s), message_arr.push("G/E/3/" + s), message_arr.push("G/E/4/" + s), message_arr.push("G/E/2/" + s + "/+"), message_arr.push("G/E/8/" + s + "/+"));
							var u = 0 != (i.bet_status || i.BET_STATUS);
							if (groundLeaguesMap.size() && "S" == Global.sType) if (groundLeaguesMap.containsKey(i.f_char)) {
								var b = groundLeaguesMap.get(i.f_char),
									I = !1;
								for (var v in b) if (b[v].l_id == i.l_id) {
									I = !0, b[v].count++;
									break
								}
								I || b.push({
									l_name: i.l_name,
									l_id: i.l_id,
									count: 1
								})
							} else groundLeaguesMap.put(i.f_char, [{
								l_name: i.l_name,
								l_id: i.l_id,
								count: 1
							}]);
							else "S" == Global.sType && groundLeaguesMap.put(i.f_char, [{
								l_name: i.l_name,
								l_id: i.l_id,
								count: 1
							}]);
							$(".leagueFilterBtn").addClass("selected"), o.push(n);
							var B = "<i class='red-count " + (i.homeRedNum && 0 != i.homeRedNum ? "" : "nHide") + "'>" + i.homeRedNum + "</i>",
								E = "<i class='red-count " + (i.awayRedNum && 0 != i.awayRedNum ? "" : "nHide") + "'>" + i.awayRedNum + "</i>",
								U = "",
								G = {
									1: "第一节",
									2: "第二节",
									3: "第三节",
									4: "第四节",
									5: "加时",
									10: "第一节",
									20: "第二节",
									30: "第三节",
									40: "第四节",
									50: "中场休息",
									"-1": "已结束"
								};
							if ("BB" == Global.sType) {
								var S = "";
								if (1 == i.STATUS_ID || 2 == i.STATUS_ID || 3 == i.STATUS_ID || 4 == i.STATUS_ID || 5 == i.STATUS_ID) {
									S = (parseInt(i.TIME_REMAINING_IN_PHASE / 60) < 10 ? "0" + parseInt(i.TIME_REMAINING_IN_PHASE / 60) : parseInt(i.TIME_REMAINING_IN_PHASE / 60)) + ":" + (parseInt(i.TIME_REMAINING_IN_PHASE % 60) < 10 ? "0" + parseInt(i.TIME_REMAINING_IN_PHASE % 60) : parseInt(i.TIME_REMAINING_IN_PHASE % 60))
								}
								U = '<em class="stateEm">' + G[i.STATUS_ID] + '</em> <em class="timeEm">' + S + "</em>"
							}
							var k = "BB" == Global.sType ? e.lqName : e.name;
							
							$(".game_container").append(" <div class='gq_bfBox gameItem' l_id='" + n + "' f_char='" + (i.f_char || "lq") + "' id='" + s + "|" + p + "|" + r + "' m_id='" + s + "'>  \t        <div class='game_title_wrap'>  \t            <p class='leagueInfo'>  \t                <b></b>  \t                <span class='Color' style='margin-right: 5px;margin-left:10px;'>" + c + "</span>  \t                <span style='color:#fc5e0a;' class='rTime' value='" + p + "'>" + U + "</span>  \t                <span style='color:#fc5e0a;' class='blick_point'></span>  \t            </p>  \t            <p class='playTitle playTitleFirst'><span class='Color'>" + k + "</span></p>  \t            <p class='playTitle'><span class='Color'>" + a.name + "</span></p>  \t        </div>  \t        <div class='gameContainer'>  \t        \t<div class='teamInfoWrap' m_id='" + s + "'>  \t        \t\t<p class='gq1_one'>  \t\t                <span class='gq_na' style='" + l + "'>" + m + B + "</span>  \t\t                <span class='gq_bf'>" + f + "</span>  \t            \t</p>  \t        \t\t<p class='gq2_one'>  \t\t                <span class='gq_na' style='" + l + "'>" + _ + E + "</span> \t\t                <span class='gq_bf'>" + h + "</span> \t            \t</p>  \t                <span class='gq_gt'><span class='Color'></span><b class='icon gt'></b></span>  \t        \t</div>  \t        \t<div class='playInfoWrap firstPlay' m_id='" + s + "' m_time='" + g + "' gt_score='" + i.gt_score + "' ht_score='" + i.ht_score + "' matchId='" + i.matchId + "' matchSpId='' ht_name='" + m + "' gt_name='" + _ + "' p_id='" + e.code + "' p_type='20' isMaster='1' lock_list=''>  \t        \t\t<p class='ht_first bet_cite codes' codes='3' isMaster='1' lock_http_flag='0' lock_msgtype7_flag='0' lock_msgtype8_flag='0'><span class='betInfoWrap'><em class='gq_zz ht_first_handicap'></em><cite class='gq_sz ht_first_odd'></cite></span></p>  \t        \t\t<p class='gt_first bet_cite codes' codes='0' lock_http_flag='0' lock_msgtype7_flag='0' lock_msgtype8_flag='0'><span class='betInfoWrap'><em class='gq_zz gt_first_handicap'></em><cite class='gq_sz gt_first_odd'></cite></span></p>  \t        \t</div>  \t        \t<div class='playInfoWrap secondPlay' m_id='" + s + "' m_time='" + g + "' gt_score='" + i.gt_score + "' ht_score='" + i.ht_score + "' matchId='" + i.matchId + "' matchSpId='' ht_name='" + m + "' gt_name='" + _ + "' p_id='" + a.code + "' p_type='20' isMaster='1' lock_list=''>  \t        \t\t<p class='ht_second bet_cite codes' codes='1' lock_http_flag='0' lock_msgtype7_flag='0' lock_msgtype8_flag='0'><span class='betInfoWrap'><em class='gq_zz ht_second_handicap'></em><cite class='gq_sz ht_second_odd'></cite></span></p>  \t        \t\t<p class='gt_second bet_cite codes' codes='0' lock_http_flag='0' lock_msgtype7_flag='0' lock_msgtype8_flag='0'><span class='betInfoWrap'><em class='gq_zz gt_second_handicap'></em><cite class='gq_sz gt_second_odd'></cite></span></p>  \t        \t</div>  \t        </div>  \t    </div> "), parseInt(p) >= 5280 && "S" == Global.sType ? $(".playInfoWrap[m_id='" + s + "']").find(".bet_cite .locked").length || ($(".playInfoWrap[m_id='" + s + "']").find(".bet_cite .betInfoWrap").hide(), $(".playInfoWrap[m_id='" + s + "']").find(".bet_cite").append("<span class='locked'>--</span>")) : y && d(i, u)
							
					,$(".teamInfoWrap").off().Touch(function(e) {
						var a = $(e).attr("m_id");
						
						( typeof(openUrl)=='function' ? openUrl('滚球',window.location.origin+"/game/#page=prePlay.html&m_id=" + a) : window.location.href = "#page=prePlay.html&m_id=" + a )
						
						return;
						
						T.Storage.set("selectedMatchId", a), "BB" == Global.sType ? T.isNative && lib.nativeApi.compareJSSDKVersion("1.0.1") ? (Global.isFirst = !0, api.openPlayGame({
							m_id: a,
							tab: "JC",
							sType: "BB"
						}, function() {})) : T.Util.openWindow(T.Util.getRootPath() + "/" + Global.webRoot + "/game/basketPlay.html?m_id=" + a + "&pType=3") : T.isNative && Global.isAndroid && lib.nativeApi.compareVersion("2.4.1") || Global.isiOS && lib.nativeApi.compareVersion("2.3.1") ? (Global.isFirst = !0, api.openPlayGame({
							m_id: a,
							tab: "JC"
						}, function() {})) : window.location.href = "#page=inPlay_new.html&m_id=" + a
					}, {
						noRepeat: 1
					})

				}
			}),
					
					selectedLeagues = T.Util.arrayUnique(o), "" != cgDropLoad && (cgDropLoad.resetload(), cgDropLoad.unlock(), cgDropLoad.noData(!1), cgDropLoad = "");
					try {
//						jsLoad("../js/lib/android-wsMqttws31.min.js", i)
					} catch (e) {
						console.error("mqtt------" + e)
					}
					
					//订阅变动推送
					var tmpGqMatchinfo = [];
					$('.gq_bfBox').each(function(e,i){
						tmpGqMatchinfo.push($(i).attr('m_id'));
					});
//					hSocket.regpush({"matchGroupIds":['0a7e365d-442b-428a-b606-e89a1f4c69a6']},Init.onMessageArrived)
					tmpGqMatchinfo.length && hSocket.regpush({"matchGroupIds":tmpGqMatchinfo},Init.onMessageArrived);
					
					if ($(".gameItem[m_id]").length && "S" == Global.sType) {
						if (!T.Util.isEmpty(footballGameTimer) && 0 != footballGameTimer.size()) {
							var n = footballGameTimer.valueArray();
							$.each(n, function(e, a) {
								a.clearTimer()
							})
						}
						"function" == typeof inplayGameTimer.timeAdd && inplayGameTimer.clearTimer(), footballGameTimer = new Map, secondBlinkTimer = new Map;
						var p = !T.Util.isEmpty(T.Storage.get("selectedMatchId"));
						$.each($(".gameItem[m_id]"), function(e, a) {
							if (p && $(a).attr("m_id") == T.Storage.get("selectedMatchId")) {
								var t = $(a).attr("id"),
									i = document.getElementById(t);
								$(i).offset().top + $(i).height() > document.documentElement.clientHeight && $("body").scrollTop($(i).offset().top - document.documentElement.clientHeight + 3 * $(i).height())
							}
							var s = $(a).attr("id").toString().split("|"),
								l = new PlayTimer(s[2], s[1], s[0]);
							footballGameTimer.put(s[0], l), $(a).find("rTime").html(l.init(l)), -1 != "2348".indexOf(s[2]) && l.timerStart()
						})
					}
				} else {
					if ($(".sx-btn").hide(), $(".mainBox .noRecord").remove(), !$(".gameItem").length) {
						$(".sx-btn").hide();
						var r = "#page=prePlayList.html";
						T.Util.isEmpty(T.Util.getPara("sType")) || "BB" != T.Util.getPara("sType") || (r = "#page=prePlayList.html&sType=BB"), $(".mainBox").append("<div class='noRecord no-game one'><div class='none-img'></div><div class='txtDesc'><p class='txtTitle'>球员还在去往球场的路上，请耐心等候...</p></div><a class='no-enter' href='" + r + "'>去投注赛前</a></div>"), $(".broadcast-box").hide()
					}
					"" != cgDropLoad && (cgDropLoad.resetload(), cgDropLoad.unlock(), cgDropLoad.noData(!1), cgDropLoad = ""), sysMessageObj.init()
				}
				Init.addBetListener()
			},
			s = function(e) {
				!T.Util.isEmpty(e) && e.length && ($(".gameItem").hide(), $.each(e, function(e, a) {
					$(".gameItem[l_id='" + a + "']").show()
				}))
			},
			l = function() {
				T.Util.xmlHttpRequest({
					type: "get",
//					reqUrl: "/web/services/match/list.json?inPlayId=all&sportType=" + Global.sType,
					reqUrl: "/tp5/api/?s=activity/football/getInplay?inPlayId=all&sportType=" + Global.sType,
					callback: function(e, a, t) {
						var s = 0;
						try {
							var l = new Date(t.getResponseHeader("Date")).getTime();
							s = (new Date).getTime() - l
						} catch (e) {}
						T.Storage.set("difTime", s), i(e), T.Storage.remove("selectedMatchId")
					},
					errorBallback: function() {}
				})
			},
			o = function(e) {
				return -1 != ("" + e).indexOf("/") ? e : -1 == ("" + e).indexOf("/") && -1 == ("" + e).indexOf(".") ? e + ".0" : e
			},
			n = function(e) {
				console.log("msgTime:" + (new Date).getTime() , e);
				//{"matchGroupId":"27c8e188-0392-45b1-a4a8-66f015740e40","pushType":"odds","content":{"matchId":"6930291","matchSpId":"471383329","matchPhase":1,"oddsType":"ASIAN","isMaster":1,"isHide":1,"ctlMethod":0,"betStatus":0,"fixtureOdds":{"h":"-0.25","w":0.94,"l":0.9}}}
				//{"msgType":2,"mId":"201803150001366000173675","uTime":"1521114110000","evtCd":null,"cFlag":null,"tFlg":null,"evtCont":null,"play":"BIGSMALL","match_phase":0,"is_master":1,"odds":"1.1,0.69","handicap":"5.5","msi":"2538687723","score":null,"state":null,"h_corner_368":null,"a_corner_368":null,"type":null,"b_status":null,"odds_phase":null,"h_value":null,"u_no":null,"n_name":null,"msg":null}
				//{"msgType":1,"mId":"201803150000807000172278","uTime":"1521114141836","evtCd":"SAFE","cFlag":1,"tFlg":"A","evtCont":{"cardNum":3,"cornerNum":10,"fhScore":"2:2","score":"2:2"},"play":null,"match_phase":null,"is_master":null,"odds":null,"handicap":null,"msi":null,"score":null,"state":null,"h_corner_368":null,"a_corner_368":null,"type":null,"b_status":null,"odds_phase":null,"h_value":null,"u_no":null,"n_name":null,"msg":null}
//				if (console.log("msgTime:" + (new Date).getTime() + " " + e.payloadString), e.payloadString && "" != e.payloadString) {
				if(e){
//					var a = {};
//					try {
//						a = JSON.parse(e.payloadString)
//					} catch (e) {
//						a = null
//					}
					var a = e ;
					if (a) {
						if (!(T.Util.isEmpty(T.Storage.get("difTime")) || T.Util.isEmpty(a.uTime) && T.Util.isEmpty(a.u_time))) {
							if ((new Date).getTime() - parseInt(T.Storage.get("difTime")) - (a.uTime || a.u_time) >= 1e4) return void console.log("msg timeout===")
						}
						var t = a.mId,
							i = footballGameTimer.get(t);
						switch ("" + a.msgType) {
						case "1":
							if ("CARD_R" == a.evtCd) if ("H" == a.tFlg) {
								var s = $(".teamInfoWrap[m_id='" + a.mId + "'] .gq1_one .red-count");
								$(s).html(parseInt($(s).html()) + 1).removeClass("nHide")
							} else {
								var l = $(".teamInfoWrap[m_id='" + a.mId + "'] .gq2_one .red-count");
								$(l).html(parseInt($(l).html()) + 1).removeClass("nHide")
							}
							if ("BB" == Global.sType && "TIME_REMAINING_IN_PHASE" == a.evtCd && a.rTime) {
								var n = parseInt(a.rTime / 60) < 10 ? "0" + parseInt(a.rTime / 60) : parseInt(a.rTime / 60),
									d = parseInt(a.rTime % 60) < 10 ? "0" + parseInt(a.rTime % 60) : parseInt(a.rTime % 60);
								$(".gameItem[m_id='" + a.mId + "'] .timeEm").html(n + ":" + d)
							}
							break;
						case "2":
							if ("BB" == Global.sType) {
								if ("1" == a.b_status) return $('[msi="' + a.msi + '"] .bet_cite .betInfoWrap').hide(), $('[msi="' + a.msi + '"] .bet_cite').removeClass("on"), $('[msi="' + a.msi + '"]').find(".bet_cite .locked").length || $('[msi="' + a.msi + '"] .bet_cite').append("<span class='locked'>--</span>"), $(".touzhu-one[msi='" + a.msi + "']").remove(), $(".pay-list-detail").find("li[msi='" + a.msi + "']").remove(), $("#selection-count,#SelectionCount").html(Buy.obj.find(".codes.on").length), void(0 == Buy.obj.find(".codes.on").length && ShopCar.hide());
								$('[msi="' + a.msi + '"] .bet_cite .betInfoWrap').show(), $('[msi="' + a.msi + '"] .bet_cite .locked').remove()
							}
							var r = void 0 != playToPlayId[a.play + "-" + a.match_phase] ? playToPlayId[a.play + "-" + a.match_phase] : a.play;
							if ("0" == a.is_master) return;
							var c = a.handicap || "",
								m = "";
							if ("70102" != r && "70104" != r || T.Util.isEmpty(c)) return !1;
							if (m = "[handicap='" + o(T.Util.getHandicapInfo(c)) + "']", !$("div.playInfoWrap[m_id='" + t + "'][p_id='" + r + "']" + m + " .codes").length) if ($("div.playInfoWrap[m_id='" + t + "'][p_id='" + r + "']").attr("handicap", o(T.Util.getHandicapInfo(c))), "70102" == r) {
								var _ = T.Util.getHandicapInfo(c),
									f = T.Util.getOppositeHandicap(_);
								0 != parseFloat(c) && (parseFloat(c) > 0 ? _ = "+" + _ : f = "+" + f), $("div.playInfoWrap[m_id='" + t + "'][p_id='70102']").find(".ht_first_handicap").html(o(_)), $("div.playInfoWrap[m_id='" + t + "'][p_id='70102']").find(".gt_first_handicap").html(o(f))
							} else $("div.playInfoWrap[m_id='" + t + "'][p_id='70104']").find(".ht_second_handicap").html("大" + o(T.Util.getHandicapInfo(c))), $("div.playInfoWrap[m_id='" + t + "'][p_id='70104']").find(".gt_second_handicap").html("小" + o(T.Util.getHandicapInfo(c)));
							p(a);
							break;
						case "3":
							var h = a.score.split(":");
							h && 2 == h.length && ($(".teamInfoWrap[m_id='" + t + "']").find(".gq1_one .gq_bf").html(h[0]), $(".teamInfoWrap[m_id='" + t + "']").find(".gq2_one .gq_bf").html(h[1]));
							break;
						case "4":
							var g = a.state;
							if ("BB" == Global.sType) {
								var y = {
									1: "第一节",
									2: "第二节",
									3: "第三节",
									4: "第四节",
									5: "加时",
									10: "第一节",
									20: "第二节",
									30: "第三节",
									40: "第四节",
									50: "中场休息",
									"-1": "已结束"
								};
								$(".gameItem[m_id='" + t + "'] .stateEm").html(y[a.statusId]), 1 == a.statusId || 2 == a.statusId || 3 == a.statusId || 4 == a.statusId || 5 == a.statusId ? $(".gameItem[m_id='" + t + "'] .timeEm").show() : $(".gameItem[m_id='" + t + "'] .timeEm").hide(), "-1" == a.statusId && (getMatchCountInfo(), $("div[m_id='" + t + "']").remove())
							}
							"S" == Global.sType && void 0 !== i && void 0 !== i.mStatus && parseInt(g) > parseInt(i.mStatus) && (clearInterval(i.timerStartFlag), clearInterval(i.halfTimerFlag), clearInterval(i.firstHalfFlag), clearInterval(i.secondHalfFlag), i.mStatus = g, -1 != "34".indexOf(g) ? i.second = 2700 : "5" == g && ($("div[m_id='" + t + "']").remove(), getMatchCountInfo()), -1 != "23489".indexOf(g) && i.timerStart());
							break;
						case "7":
							"1" == a.type && ("1" == a.b_status ? ($(".playInfoWrap[m_id='" + t + "'] .codes").attr("lock_msgtype7_flag", "1"), $(".playInfoWrap[m_id='" + t + "']").find(".betInfoWrap").hide(), $(".playInfoWrap[m_id='" + t + "']").find(".bet_cite").removeClass("on"), $(".playInfoWrap[m_id='" + t + "']").find(".bet_cite .locked").length || $(".playInfoWrap[m_id='" + t + "']").find(".bet_cite").append("<span class='locked'>--</span>"), $(".touzhu-one[m_id='" + t + "']").remove(), $(".pay-list-detail").find("li[m_id='" + t + "']").remove(), $("#selection-count,#SelectionCount").html(Buy.obj.find(".codes.on").length), 0 == Buy.obj.find(".codes.on").length && ShopCar.hide()) : "0" == a.b_status && ($(".playInfoWrap[m_id='" + t + "'] .codes").attr("lock_msgtype7_flag", "0"), $(".playInfoWrap[m_id='" + t + "'] .codes").attr("lock_http_flag", "0"), $(".playInfoWrap[m_id='" + t + "'] .codes[lock_http_flag='0'][lock_msgtype7_flag='0'][lock_msgtype8_flag='0']").find(".betInfoWrap").show(), $(".playInfoWrap[m_id='" + t + "'] .codes[lock_http_flag='0'][lock_msgtype7_flag='0'][lock_msgtype8_flag='0']").find(".locked").remove()));
							break;
						case "8":
							if (!T.Util.isEmpty(a.odds_phase) && "2" == a.odds_phase) return !1;
							var r = void 0 != playToPlayId[a.play + "-" + a.match_phase] ? playToPlayId[a.play + "-" + a.match_phase] : a.play;
							if (-1 == "7010270104".indexOf(r) || "0" == a.is_master) return !1;
							var u = "";
							T.Util.isEmpty(a.odds) || (u = a.odds.split(","));
							var c = a.h_value || "",
								m = "";
							if ("70102" != r && "70104" != r) return void(m = "[handicap='" + c + "']");
							m = "[handicap='" + T.Util.getHandicapInfo(c) + "']";
							var b = $(".playInfoWrap[m_id='" + t + "'][p_id='" + r + "']" + m);
							if ("1" == a.b_status) {
								if ($(b).length) {
									Buy.removeBetRecordByPlayIdAndHandicap(r, c), $(b).find(".codes").removeClass("on"), $(b).find(".codes").find(".betInfoWrap").hide(), $(b).find(".bet_cite .locked").length || $(b).find(".bet_cite").append("<span class='locked'>--</span>"), $(".touzhu-one[m_id='" + t + "'][p_id='" + r + "']").remove(), $(".pay-list-detail").find("li[m_id='" + t + "'][p_id='" + r + "']").remove(), $("#selection-count,#SelectionCount").html(Buy.obj.find(".codes.on").length), 0 == Buy.obj.find(".codes.on").length && ShopCar.hide();
									var I = "" + $(b).attr("locked_list"),
										v = "70101" == r || "70111" == r ? "999" : c; - 1 == I.indexOf(v) && (T.Util.isEmpty() ? $(b).attr("locked_list", v) : $(b).attr("locked_list", I + "," + v))
								}
							} else if ("0" == a.b_status) {
								if ("0" == a.is_master) return;
								var b = $(".playInfoWrap[m_id='" + t + "'][p_id='" + r + "']");
								if (b.length) {
									var I = "" + $(b).attr("locked_list"),
										B = "70101" == r || "70111" == r ? "999" : c;
									$(b).attr("locked_list", I.replace(new RegExp(B + ",|(,)?" + B, ["g"]), ""))
								}
								if (!T.Util.isEmpty(a.odds) && u.length) {
									if ($(b).attr("handicap", T.Util.getHandicapInfo(c)), $(b).find(".codes").find(".betInfoWrap").show(), $(b).find(".locked").remove(), "70102" != r || T.Util.isEmpty(c))"70104" != r || T.Util.isEmpty(c) || ($("div.playInfoWrap[m_id='" + t + "'][p_id='70104']").find(".ht_second_handicap").html("大" + o(T.Util.getHandicapInfo(c))), $("div.playInfoWrap[m_id='" + t + "'][p_id='70104']").find(".gt_second_handicap").html("小" + o(T.Util.getHandicapInfo(c))));
									else {
										var _ = T.Util.getHandicapInfo(c),
											f = T.Util.getOppositeHandicap(_);
										0 != parseFloat(c) && (parseFloat(c) > 0 ? _ = "+" + _ : f = "+" + f), $("div.playInfoWrap[m_id='" + t + "'][p_id='70102']").find(".ht_first_handicap").html(o(_)), $("div.playInfoWrap[m_id='" + t + "'][p_id='70102']").find(".gt_first_handicap").html(o(f))
									}
									a.handicap = a.h_value, p(a)
								}
							}
							break;
						case "100":
							var E = a;
							rollMessage.addMsg(E);
							break;
						case "99":
							T.User.getUInfo(T.Storage.get("access_token"), T.User.refreshUMoney, "1")
						}
						delete a
					}
				}
			},
			d = function(t, i) {
				console.log('d',t,i);
				var s = "BB" == Global.sType ? t.MATCH_ID : t.m_id,
					l = "BB" == Global.sType ? t.ODD_INFO : t.playList,
					n = {},
					d = {
						bet_status: "",
						ht: {},
						gt: {}
					},
					p = {
						bet_status: "",
						ht: {},
						gt: {}
					};
				if ("S" == Global.sType) for (var r = 0; r < l.length; r++) {
					n = l[r]; //playlist
					var c = n.oddsList[0];//oddlist
					n.p_id == e.code ? ( 
							d.bet_status = c.bet_status,
							d.matchSpId = c.matchSpId,
							d.ht.handicap = c.handicap, 
							d.ht.odd = c.odds.split(",")[0], 
							d.gt.handicap = c.handicap, 
							d.gt.odd = c.odds.split(",")[1] 
						) : n.p_id == a.code && (
							p.bet_status = c.bet_status,
							p.matchSpId = c.matchSpId,
							p.ht.handicap = c.handicap, 
							p.ht.odd = c.odds.split(",")[0], 
							p.gt.handicap = c.handicap, 
							p.gt.odd = c.odds.split(",")[1]
						)
				} else for (r in l) {
//					var m = l[r];
//					r == e.code ? ( d.bet_status = m[0].bet_status, d.ht.handicap = m[0].handicap, d.ht.odd = m[0].win, d.gt.handicap = m[0].handicap, d.gt.odd = m[0].lost, d.msi = m[0].msi ) : r == a.code && (p.bet_status = m[0].bet_status, p.ht.handicap = m[0].handicap, p.ht.odd = m[0].big, p.gt.handicap = m[0].handicap, p.gt.odd = m[0].small, p.msi = m[0].msi)
				}
				if (!T.Util.isEmpty(d.ht.odd) && !T.Util.isEmpty(d.ht.handicap)) {
					var _ = T.Util.getHandicapInfo(d.ht.handicap),
						f = T.Util.getOppositeHandicap(_);
						0 != parseFloat(T.Util.getLetBall(d.ht.handicap)) && (parseFloat(T.Util.getLetBall(d.ht.handicap)) > 0 ? _ = "+" + _ : f = "+" + f),
						$(".firstPlay[m_id='" + s + "']").attr("handicap", o(_)),
						$(".firstPlay[m_id='" + s + "']").attr("handicap_s", d.ht.handicap),
						"BB" == Global.sType && $(".firstPlay[m_id='" + s + "']").attr("msi", d.msi),
						$(".firstPlay[m_id='" + s + "']").attr("matchSpId", d.matchSpId), 
						$(".firstPlay[m_id='" + s + "'] .ht_first_handicap").html(o(_)), 
						$(".firstPlay[m_id='" + s + "'] .ht_first_odd").html(NumberUtil.fmoney(d.ht.odd)), 
						$(".firstPlay[m_id='" + s + "'] .gt_first_handicap").html(o(f)), 
						$(".firstPlay[m_id='" + s + "'] .gt_first_odd").html(NumberUtil.fmoney(d.gt.odd))
				}
				if (!T.Util.isEmpty(p.ht.odd) && !T.Util.isEmpty(p.ht.handicap)) {
					var h = T.Util.getHandicapInfo(p.ht.handicap);
					$(".secondPlay[m_id='" + s + "']").attr("handicap", o(h)),
					$(".secondPlay[m_id='" + s + "']").attr("handicap_s", p.ht.handicap),
					"BB" == Global.sType && $(".secondPlay[m_id='" + s + "']").attr("msi", p.msi),
					$(".secondPlay[m_id='" + s + "']").attr("matchSpId", p.matchSpId), 
					$(".secondPlay[m_id='" + s + "'] .ht_second_handicap").html("大" + o(h)), 
					$(".secondPlay[m_id='" + s + "'] .ht_second_odd").html(NumberUtil.fmoney(p.ht.odd)), 
					$(".secondPlay[m_id='" + s + "'] .gt_second_handicap").html("小" + o(h)), 
					$(".secondPlay[m_id='" + s + "'] .gt_second_odd").html(NumberUtil.fmoney(p.gt.odd))
				}
				(T.Util.isEmpty(d.ht.odd) || i || 1 == d.bet_status) && ($(".firstPlay[m_id='" + s + "'] .bet_cite .betInfoWrap").hide(), $(".firstPlay[m_id='" + s + "'] .bet_cite").append("<span class='locked'>--</span>")), (T.Util.isEmpty(p.ht.odd) || i || 1 == p.bet_status) && ($(".secondPlay[m_id='" + s + "'] .bet_cite .betInfoWrap").hide(), $(".secondPlay[m_id='" + s + "'] .bet_cite").append("<span class='locked'>--</span>")), Buy.init($("#groundGameList"), "ground_match")
				
			},
			p = function(e) {
				var a = e.mId,
					t = void 0 != playToPlayId[e.play + "-" + e.match_phase] ? playToPlayId[e.play + "-" + e.match_phase] : e.play,
					i = e.odds.split(",");
				if ("BB" == Global.sType) {
					var s = JSON.parse(e.odds),
						l = [];
					l.push((s.win || s.big) - 1), l.push((s.lost || s.small) - 1), i = l
				}
				var o = e.handicap || "";
				switch (t) {
				case "70102":
				case "70104":
					for (var n = 0; n < i.length; n++) {
						var d = "",
							p = i[n];
							console.log(p);
						"70112" == t || "70102" == t ? 0 == n ? (d = "3", $('div[p_id="' + t + '"][m_id="' + a + '"]').find('[codes="3"] cite').html(NumberUtil.fmoney(NumberUtil.floatAdd(parseFloat(p), 0)))) : 1 == n && (d = "0", $('div[p_id="' + t + '"][m_id="' + a + '"]').find('[codes="0"] cite').html(NumberUtil.fmoney(NumberUtil.floatAdd(parseFloat(p), 0)))) : "70104" != t && "70114" != t || "" != p && (0 == n ? (d = "1", $('div[p_id="' + t + '"][m_id="' + a + '"]').find('[codes="1"] cite').html(NumberUtil.fmoney(NumberUtil.floatAdd(parseFloat(p), 0)))) : 1 == n && (d = "0", $('div[p_id="' + t + '"][m_id="' + a + '"]').find('[codes="0"] cite').html(NumberUtil.fmoney(NumberUtil.floatAdd(parseFloat(p), 0))))), Buy.getChangedInPayList(a, t, d, NumberUtil.fmoney(NumberUtil.floatAdd(parseFloat(p), 0)), "ground", o)
					}
					break;
				default:
					p_name = "木有获取到玩法"
				}
			};
		return {
			init: t,
			addBetListener: function() {
				var e = [];
				$(".codes").off().Touch(function(a) {
					var a = $(a);
					return "1" != $(a).attr("lock_msgtype7_flag") && "1" != $(a).attr("lock_msgtype8_flag") && "1" != $(a).attr("lock_http_flag") && (!a.find(".locked").length && (a.toggleClass("on"), e = Buy.obj.find(".codes.on"), $(".selection-count").html(e.length), $("#selection-count").html(e.length), void(e.length > 0 ? 1 == e.length && 1 == ShopCar.type ? ($(".touzhu-box1 .touzhu-main").html(Buy.getBetlist(Buy.obj, Buy.fromtype)), ShopCar.showOneBetView()) : (ShopCar.type = 2, ShopCar.hideOneBetView(), $(".selection-count,#selection-count").html(e.length), ShopCar.showBetCountIcon()) : ($(".selection-count,#selection-count").html(0), ShopCar.hide(), ShopCar.hideBetCountIcon()))))
				})
			},
			onMessageArrived: n,
			showMatchsByLeaIds: s
		}
	}();
$(document).ready(function() {
	jsLoad("../js/buy.js?v=7", function() {
		jsLoad("../js/common.js?v=5", function() {
			Init.init(), $(".match-main").off().dropload({
				scrollArea: window,
				loadUpFn: function(e) {
					cgDropLoad = e, cgDropLoad.resetload(), cgDropLoad.unlock(), cgDropLoad.noData(!1), $("#betslipBar").addClass("initHide"), console.log("滚球列表下拉刷新"), Init.init()
				},
				threshold: 50
			})
		})
	})
});
var last = new Date - 0;
setInterval(function() {
	var e = new Date - 0;
	e - last > 2e3 ? Global.hasHeiping = !0 : last = e
})
</script>