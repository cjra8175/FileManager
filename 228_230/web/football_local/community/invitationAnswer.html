<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	    <meta name="apple-mobile-web-app-capable" content="yes">
	    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	    <meta name="format-detection" content="telephone=no">
		<title>邀请回答</title>
		
		<link rel="stylesheet" type="text/css" href="../css/sq.css">
		
		<link rel="stylesheet" type="text/css" href="../css/templete_info.css">
	</head>
	<body>
	<header class="sq-header" style="background:#2479e2">
		<span class="invitation-return" id="back"><i class="invitation-back"></i><em class="invitation-return-txt">返回</em></span>
		<input type="text" class="invite-input" placeholder="搜索你想邀请的人" onkeyup="Init.blankInputSearch(this)">
		<span class="invite-confirm">确定</span>
	</header>
		
		<div class="invite-content">
			<div class="invite-con">
				<div class="invite-list">
					<ul>
						
							
							
								
								
								
							
							
						

					</ul>
				</div>
				<div class="no-content hide" style="background:#f6f6f6">
					<div class="none-icon"></div>
					<div class="none-txt">空空荡荡...</div>
				</div>
			</div>
		</div>
		
		<script src="../js/lib/zeptoPpLoadNativeMap.min.js"></script>
		<script src="../js/main.js"></script>
		<script>/iPhone|iPad|iPod|ios|IOS/.test(window.navigator.userAgent)&&(812==document.documentElement.clientHeight&&375==document.documentElement.clientWidth?($(".sq-header").css("padding-top","40px"),$(".invite-content").css("top","88px")):($(".sq-header").css("padding-top","16px"),$(".invite-content").css("top","64px"))),Global.invitationMenObj={page:1,hasReturn:!0,searchWord:"",inviteId:T.Util.getPara("note_id")};var DropLoadObj=function(){var t={};return t.droploadObj=null,t.init=function(){T.Util.isEmpty(t.droploadObj)&&(t.droploadObj=$(".invite-content").off().dropload({scrollArea:$(".invite-content"),loadUpFn:function(t){Global.invitationMenObj.page=1,Global.invitationMenObj.hasReturn=!0,t.resetload(),t.unlock(),t.noData(!1),Init.getInvitationMen(Global.invitationMenObj.searchWord)},loadDownFn:function(t){Global.invitationMenObj.hasReturn&&0!=Global.invitationMenObj.page&&(Global.invitationMenObj.hasReturn=!1,Init.getInvitationMen(Global.invitationMenObj.searchWord))},autoLoad:!1,threshold:50}))},t.doDropLoadInit=function(t,i){i&&(t||"down"!=i.direction?t?(i.noData(!0),i.lock("down"),i.resetload()):i.resetload():(i.resetload(),i.noData(!1),i.unlock()))},t}(),Init=function(){var t={};return t.pageInit=function(){DropLoadObj.init(),Init.getInvitationMen(),Init.addListener()},t.getInvitationMen=function(t){var i="";i=T.Util.isEmpty(t)?"/forum/api/user/get_invitation?invite_id="+Global.invitationMenObj.inviteId+"&invite_type=1&page_size=20&page_index="+Global.invitationMenObj.page:"/app-web/api/expert/qry_experts?name="+t+"&page_index="+Global.invitationMenObj.page+"&page_size=20&invite_id="+Global.invitationMenObj.inviteId+"&invite_type=1",T.Util.isEmpty(T.Storage.get("access_token"))||(i+="&access_token="+T.Storage.get("access_token")),T.Util.xmlHttpRequest({type:"get",reqUrl:i,callback:function(i){Global.invitationMenObj.hasReturn=!0;var n=null;if(T.Util.isEmpty(t)?n=i.get_invitation:($(".invite-con .invite-list ul").empty(),n=i.qry_experts),T.Util.isEmpty(n)||T.Util.isEmpty(n.data)||!n.data.length)DropLoadObj.doDropLoadInit(!0,DropLoadObj.droploadObj),1==Global.invitationMenObj.page&&($(".invite-con .invite-list ul").empty(),$(".no-content").css("display","block"),"block"==$(".no-content").css("display")?$(".dropload-down").css("display","none"):$(".dropload-down").css("display","block"));else{1==Global.invitationMenObj.page&&$(".invite-con .invite-list ul").empty(),$(".no-content").css("display","none");var e=n.data,o=[];if(e.length>0){for(var a=0;a<e.length;a++){var l=e[a].is_invite?"已邀请":"邀请",s=e[a].is_invite?"invite-btn invite-ok":"invite-btn";e[a].is_invite;o.push('<li class="invite-list" user-no="'+e[a].user_no+'">\t\t\t\t\t\t\t\t\t\t\t\t<div class="invite-img"><img src="'+e[a].portrait_pic+'"/></div>\t\t\t\t\t\t\t\t\t\t\t\t<div class="invite-r">\t\t\t\t\t\t\t\t\t\t\t\t<div class="invite-user">'+e[a].nick_name+'</div>\t\t\t\t\t\t\t\t\t\t\t\t<div class="invite-imfor">'+T.Util.notNullValue(e[a].signature,"")+'</div>\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t<span class="'+s+'" user-no="'+e[a].user_no+'">'+l+"</span>\t\t\t\t\t\t\t\t\t\t\t\t</li>")}$(".invite-con .invite-list ul").append(o.join(""))}Global.invitationMenObj.page=n.page_index,DropLoadObj.doDropLoadInit(0==Global.invitationMenObj.page,DropLoadObj.droploadObj),Init.addInviteListener()}},errorCallback:function(){Global.invitationMenObj.hasReturn=!0,DropLoadObj.droploadObj&&DropLoadObj.droploadObj.resetload()}})},t.inviteMenOrCancel=function(t,i,n){var e="",o=null;if(T.Util.isEmpty(T.Storage.get("access_token")))return void T.Util.login();if(!T.Util.isEmpty(t)){if(2==t)e="/forum/api/friends/add_friend",o={add_friend:{access_token:T.Storage.get("access_token"),user_no:i,invite_type:"1",invite_id:Global.invitationMenObj.inviteId}};else if(1==t)return void tip("他已收到你的邀请，无法撤回");T.Util.xmlHttpRequest({type:"post",reqUrl:e,reqData:o,callback:function(i){"0"==i.result_code&&"0"==i.msg_code&&(2==t?(tip("邀请成功"),$(n).hasClass("invite-btn")&&($(n).addClass("invite-ok"),$(n).html("已邀请"))):1==t&&(tip("取消成功"),$(n).hasClass("invite-btn invite-ok")&&($(n).removeClass("invite-ok"),$(n).html("邀请"))))},errorCallback:function(){2==t?tip("邀请失败"):1==t&&tip("取消邀请失败")}})}},t.addInviteListener=function(){$(".invite-ok,.invite-btn").off().Touch(function(t){var i=$(t).attr("user-no");$(t).hasClass("invite-btn invite-ok")?Init.inviteMenOrCancel(1,i,t):$(t).hasClass("invite-btn")&&Init.inviteMenOrCancel(2,i,t)}),$(".invite-con .invite-list ul .invite-list").off().Touch(function(t,i){$(i.target).hasClass("invite-btn invite-ok")||$(i.target).hasClass("invite-btn")||T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/recommend/expert.html?user_no="+$(t).attr("user-no"))})},t.addListener=function(){$("#back").off().Touch(function(){T.Util.back()}),$(".invite-confirm").off().Touch(function(){if($(".invite-input").blur(),T.Util.isEmpty($(".invite-input").val().trim()))return void tip("搜索的内容不能为空");Global.invitationMenObj.searchWord=$(".invite-input").val().trim(),Global.invitationMenObj.page=1,Global.invitationMenObj.hasReturn=!0,Init.getInvitationMen(Global.invitationMenObj.searchWord)})},t.blankInputSearch=function(t){T.Util.isEmpty(t)||T.Util.isEmpty($(t).val().trim())&&(Global.invitationMenObj.hasReturn=!0,Global.invitationMenObj.page=1,Global.invitationMenObj.searchWord=$(".invite-input").val().trim(),$(".dropload-down").css("display","block"),Init.getInvitationMen())},t}(),appFirstInfo=!0;$(document).ready(function(){function t(){appFirstInfo&&(appFirstInfo=!1,Init.pageInit())}T.isNative?T.appToH5.init(t):t()})</script>
	</body>
</html>
