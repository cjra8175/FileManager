<!DOCTYPE html>
<html>
<head lang="en">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0">
    <meta content="telephone=no" name="format-detection">
    <meta name="msapplication-tap-highlight" content="no">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cleartype" content="on">
    <title>娱乐竞猜</title>
    <link rel="stylesheet" href="./css/enter.css">
</head>

<body>
    <header class="header">
        <em class="back"></em>
        <span class="headerText">娱乐竞猜</span>
        <b class="lp"></b>
    </header>
    <nav>
        <div class="loginN">
            <em></em>
            <span>请先登录</span>
        </div>
        <div class="loginY hide">
            <img src="" alt="" class="userImg">
            <span class="userMoney"></span>
        </div>
        <b class="bet">记录</b>
        <b class="rule">规则</b>
    </nav>
    <section>
        <div class="ck-bg hide"></div>
        <div class="sectionData"></div>
        
            
                
                    
                    
                    
                    
                
                
                
                
                    
                        
                        
                    
                    
                        
                        
                    
                
                
                    
                    
                    
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                        
                    
                    
                        
                        
                    
                
            
        
        
            
                
                    
                    
                
                
                
                
                    
                        
                    
                    
                        
                    
                    
                        
                    
                
                
                    
                    
                    
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                        
                    
                    
                        
                        
                    
                
            
        
     </section>
    <div class="altBox jbBox hide">
        <b class="jb"></b>
        <div class="jbContent">
            <p>恭喜您，中奖啦</p>
            <p class="jbTitle"></p>
            <p>中获得<span></span>金币</p>
        </div>
        <ul class="jbBtnBox">
            <li class="on shareFd">炫耀一下</li>
            <li class="close">知道了</li>
        </ul>
    </div>
    <div class="altBox altEng hide">
        <b class="betS"></b>
        <div class="betContent">
            <p>投注成功</p>

            <p class="overText">在题目: <span class="betTitle"></span> 中</p>

            <p class="overText">您投注了: <span class="betType"></span> <span class="betMoney"></span></p>

            <p>预计返还: <span class="betPMoney"></span></p>
        </div>
        <ul class="betBtnBox">
            <li class="on shareFd">分享给好友</li>
            <li class="close">完成</li>
        </ul>
    </div>
    <div class="mask hide"></div>

 </body>
<script src="../js/lib/zeptoPpLoadNativeMap.min.js"></script>
<script src="../js/main.js"></script>
<script src="../js/lib/fx.js"></script>
<script src="./js/enter.js"></script>
<script>/iPhone|iPad|iPod|ios|IOS/.test(window.navigator.userAgent)&&/QAPP/.test(window.navigator.userAgent)&&(812==document.documentElement.clientHeight&&375==document.documentElement.clientWidth?($("header").css("padding-top","40px"),$("nav").css("top","88px"),$("section").css("padding-top","128px")):($("header").css("padding-top","16px"),$("nav").css("top","64px"),$("section").css("padding-top","104px")))</script>
<script>var page=1,IsMore=!1,pageSize=10,endAll=!1,submitCommitSuccess=!0,scrollTop=0,scrollHeight=0,windowHeight=0;$("section").scroll(function(){scrollTop=$(this).scrollTop(),scrollHeight=$(".sectionData").height(),windowHeight=$(this).height(),scrollTop+windowHeight>=scrollHeight-2&&IsMore&&(page++,IsMore=!1,Init.getData(),$(".sectionData").append("<div class='load' style='text-align: center;margin-top:-10px'>加载中...</div>"))});var initBet=function(t){$(".selectBg").removeClass("on").attr("pay-money",0),$(".jc-bg").removeClass("ainimb on"),$(".gp-bg").removeClass("ainimb on"),$(".betBox").removeClass("sUp").addClass("sDown"),t?($(".listFooter").removeClass("opt"),$(".betBox").addClass("hide")):(setTimeout(function(){$(".listFooter").removeClass("opt")},200),setTimeout(function(){$(".betBox").addClass("hide")},300))};$(".bet").off().Touch(function(){if(T.Util.isEmpty(T.Storage.get("access_token")))return void T.Util.login();T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/entertainment/enterRecord.html")}),$(".lp").off().Touch(function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/shangcheng/gift_center.html")}),$(".rule").off().Touch(function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/entertainment/enterRule.html")}),$(".userMoney").off().Touch(function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/shangcheng/shoppingMall.html?type=JB")}),$(".loginN em,.loginN span").off().Touch(function(){T.Util.login()}),$(".back").off().Touch(function(){T.Util.back()}),$(".mask").off().Touch(function(){initBet(),$(this).addClass("hide"),$(".altBox").addClass("hide")}),$(".ck-bg").off().Touch(function(){$(this).addClass("hide"),$(".refer").removeClass("referEnd"),$(".referBox").addClass("hide")});var refreshCallBack=function(){if(T.Util.isEmpty(T.Storage.get("access_token")))$(".loginN").removeClass("hide").next().addClass("hide");else{var t=T.Storage.get("userinfo");$(".userMoney").html(T.Util.parseNumber(t.coin)).attr("data-money",t.coin),$(".userImg").attr("src",t.portrait_pic),$(".loginN").addClass("hide").next().removeClass("hide")}},successjbBox=function(){if(!T.Util.isEmpty(T.Storage.get("access_token"))){var t={accessToken:T.Storage.get("access_token")};T.Util.xmlHttpRequest({type:"post",reqUrl:"/v1/h5game/FunnyQuiz/getUser",reqData:t,callback:function(t){t.result.length&&parseInt(t.result[0].earn)>0&&($(".jbBox").removeClass("hide"),$(".mask").removeClass("hide"),$(".jbTitle").html("你在"+t.result[0].title),$(".jbContent p:last-child span").html(T.Util.parseNumber(t.result[0].earn)),$(".jbTitle").attr("data-title",t.result[0].title),$(".jbTitle").attr("data-money",T.Util.parseNumber(t.result[0].earn)),$(".jbTitle").attr("data-oid",t.result[0].orderId)),Init.listener()},errorCallback:function(){}})}},Init=function(){var t=function(){s(),refreshCallBack(),Global.isFirst&&($(".sectionData").empty(),page=1,e(),Global.isFirst=!1),T.Util.isEmpty(T.Storage.get("enterUser"))&&(window.location.href="enterNewuser.html"),successjbBox()},e=function(){var t={accessToken:T.Storage.get("access_token"),page:page,pageSize:pageSize};T.Util.xmlHttpRequest({type:"post",reqUrl:"/v1/h5game/FunnyQuiz/quiz",reqData:t,callback:function(t){$(".load").remove();var e=t.quiz;IsMore=!(e.length<pageSize),$.each(e,function(t,e){var a="";a=1==e.type?solidHtml(e):jackpotHtml(e),$(".sectionData").append(a),$(".quizId"+e.quizId).textScroll()}),endAll=e.length<pageSize,endAll&&($(".nomore").remove(),$(".sectionData").append("<div class='nomore'>已全部加载完毕</div>")),Init.listener()},errorCallback:function(){}})},a=function(t,e,a){var s=T.Storage.get("userinfo");if(1==t.type){var n=parseInt($(e).find(".support-num").html().replace(/\D/g,""))+1;$(e).find(".support-num").html(n+"人"),$(e).parent().parent().find("div.userSele").prepend('<span><img src="'+s.portrait_pic+'" alt=""><span class="">'+s.nick_name+"投了"+a+"金币</span></span>")}else{$(e).parent().parent().find(".jcPlayType").html("奖池 "+T.Util.parseNumber(t.pool));var n=parseInt($(e).find(".support-num").html().replace(/\D/g,""))+1;$(e).find(".support-num").html(n+"人"),$(e).parent().parent().find("div.userSele").prepend('<span><img src="'+s.portrait_pic+'" alt=""><span class="">'+s.nick_name+"投了"+a+"金币</span></span>")}},s=function(){$(".selectBg").off().Touch(function(){if($(this).hasClass("matchEnd"))return void tip("本期竞猜已结束");var t=$(this).parent().parent(),e=t.siblings(".betBox");$(this).hasClass("on")?($(this).removeClass("on").attr("pay-money",0),$(this).find("b").removeClass("ainimb on")):(initBet(1),$(this).addClass("on"),$(this).attr("pay-money",e.find(".selectMoney").attr("data-money")),$(this).parent().siblings().find(".selectBg").removeClass("on").attr("pay-money",0),$(this).find("b").addClass("ainimb on"),$(this).parent().siblings().find("b").removeClass("ainimb on")),t.find(".selectBg").hasClass("on")?t.siblings(".listFooter").addClass("opt"):setTimeout(function(){t.siblings(".listFooter").removeClass("opt")},200),t.siblings(".betBox").hasClass("hide")||t.find(".selectBg").hasClass("on")?t.siblings(".betBox").removeClass("hide sDown").addClass("sUp"):(t.siblings(".betBox").removeClass("sUp").addClass("sDown"),t.siblings(".betBox").find(".moneyBox").hasClass("sUp")&&(t.siblings(".betBox").find(".moneyBox").removeClass("sUp").addClass("sDown"),setTimeout(function(){t.siblings(".betBox").find(".moneyBox").addClass("hide")},300)),setTimeout(function(){t.siblings(".betBox").addClass("hide")},300));for(var a,s=t.find(".selectBg.on"),n=0,i=0;i<s.length;i++)n+=new Number($(s[i]).find("em").html());0==n&&(n=s.length),a=1==$(this).attr("quzi-type")?Math.round(e.find(".selectMoney").attr("data-money")*NumberUtil.fmoney(n)):parseInt((parseInt($(this).attr("data-pool"))-parseInt($(this).attr("data-amount")))*(.01*(100-parseInt($(this).attr("data-tax"))))*parseInt($(this).attr("pay-money"))/(parseInt($(this).attr("pay-money"))+parseInt($(this).attr("data-amount")))+parseInt($(this).attr("pay-money"))),e.find(".allpm").html(T.Util.parseNumber(a))}),$(".refer").off().Touch(function(){$(this).toggleClass("referEnd"),$(".ck-bg").removeClass("hide"),$(this).siblings(".referBox").toggleClass("hide")}),$(".betSelectBox").off().Touch(function(){$(this).find("b").toggleClass("selectLt");var t=$(this).prev(".moneyBox");t.hasClass("hide")?t.removeClass("hide sDown").addClass("sUp"):(t.removeClass("sUp").addClass("sDown"),setTimeout(function(){t.addClass("hide")},300))}),$(".moneyBox li").off().Touch(function(){var t=$(this).parent(),e=t.parent();$(this).addClass("on").siblings().removeClass("on"),t.siblings(".betSelectBox").find(".selectMoney").html($(this).find("span").html()).attr("data-money",$(this).find("span").attr("data-money")),t.removeClass("sUp").addClass("sDown"),setTimeout(function(){t.addClass("hide")},300);for(var a,s=e.siblings("ul").find(".selectBg.on"),n=0,i=0;i<s.length;i++)$(s[i]).attr("pay-money",$(this).find("span").attr("data-money")),n+=new Number($(s[i]).find("em").html());0==n&&(n=s.length),a=1==$(s).attr("quzi-type")?Math.round($(this).find("span").attr("data-money")*NumberUtil.fmoney(n)):parseInt((parseInt($(s).attr("data-pool"))-parseInt($(s).attr("data-amount")))*(.01*(100-parseInt($(s).attr("data-tax"))))*parseInt($(s).attr("pay-money"))/(parseInt($(s).attr("pay-money"))+parseInt($(s).attr("data-amount")))+parseInt($(s).attr("pay-money"))),e.find(".allpm").html(T.Util.parseNumber(a))}),$(".betButton").off().Touch(function(){if(T.Util.isEmpty(T.Storage.get("access_token")))return void T.Util.login();var t=T.Storage.get("userinfo"),e=$(this).siblings(".betSelectBox").find(".selectMoney").attr("data-money"),s=$(this).parent().siblings("ul").find(".selectBg.on");if(t.coin<e*s.length)return void confirm("很抱歉，您的账户余额不足，请先充值",function(){T.Util.openWindow(T.Util.getRootPath()+"/"+Global.webRoot+"/shangcheng/shoppingMall.html?type=JB")},"取消","去充值");var n={accessToken:T.Storage.get("access_token"),quizId:$(s).attr("quzi-id")};n["option"+$(".selectBg.on").attr("data-index")]=$(".selectBg.on").attr("pay-money");var i=$(".selectBg.on").parent();T.Util.xmlHttpRequest({type:"post",reqUrl:"/v1/h5game/FunnyQuiz/vote",reqData:n,callback:function(t){var n=$(".overList[quzi-id='"+$(s).attr("quzi-id")+"']"),o=n.find(".selectBg.on"),l="";$(".altEng").removeClass("hide").attr("data-oid",t.orderId),$(".mask").removeClass("hide"),$(".betTitle").html(n.find(".listTitle").html());for(var r=0;r<o.length;r++)l+=$(o[r]).attr("data-type")+"."+$(o[r]).find(".tname").html()+" ";1==t.quiz.type?$(".betType").css("color","#3ea98f"):$(".betType").css("color","#8153ac"),$(".betType").html(l);var d=T.Util.parseNumber(e*s.length);$(".betMoney").html(d+"金币"),$(".userMoney").html(T.Util.parseNumber($(".userMoney").attr("data-money")-e*s.length)).attr("data-money",$(".userMoney").attr("data-money")-e*s.length),$(".betPMoney").html(n.find(".allpm").html()+"金币"),a(t.quiz,i,d)},errorCallback:function(){}})},{noRepeat:1}),$(".close").off().Touch(function(){initBet(),$(this).parent().parent().addClass("hide"),$(".mask").addClass("hide")}),$(".betBtnBox .shareFd").off().Touch(function(){if(T.isNative){var t={obj_type:"ccl",obj_id:$(".altEng").attr("data-oid"),title:"《娱乐竞猜》猜尽天下事！",text:$(".betTitle").html()};api.share(t,function(t){$(".altEng").addClass("hide"),$(".mask").addClass("hide"),initBet()})}else tip("请在APP上打开")}),$(".jbBtnBox .shareFd").off().Touch(function(){if(T.isNative){var t={obj_type:"ccl",obj_id:$(".jbTitle").attr("data-oid"),title:"《娱乐竞猜》猜尽天下事！",text:$(".jbTitle").attr("data-title")};api.share(t,function(t){$(".altEng").addClass("hide"),$(".mask").addClass("hide"),initBet()})}else tip("请在APP上打开")})};return{init:t,listener:s,getData:e}}(),initCallBack=function(){Init.init()};$(function(){T.isNative?T.appToH5.init(initCallBack,refreshCallBack):T.Util.isEmpty(T.Storage.get("access_token"))?(T.Storage.remove("access_token"),T.Storage.remove("userinfo"),initCallBack()):T.User.getUInfo(T.Storage.get("access_token"),initCallBack)})</script>
</html>
